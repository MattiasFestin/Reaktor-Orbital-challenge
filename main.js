var epsilon = 0.01;
//[TODO] - Inline and unrole optimize for 3d case.
var Vec3 = (function () {
    function Vec3(arr) {
        /**
         * Assertions
         */
        if (!Array.isArray(arr)) {
            throw new TypeError('Invalid construtor parameter type. Array expected.');
        }
        if (arr.length !== 3) {
            throw new TypeError('Invalid construtor array length. Length 3 expected.');
        }
        this.value = new Float32Array(arr);
    }
    /**
     * Getters for 3d coordinates
     */
    Vec3.prototype.getX = function () {
        return this.value[0];
    };
    ;
    Vec3.prototype.getY = function () {
        return this.value[1];
    };
    ;
    Vec3.prototype.getZ = function () {
        return this.value[2];
    };
    ;
    Vec3.prototype.add = function (w) {
        var v = this;
        return new Vec3([
            this.getX() + w.getX(),
            this.getY() + w.getY(),
            this.getZ() + w.getZ(),
        ]);
    };
    Vec3.prototype.neg = function () {
        var v = this;
        return new Vec3([
            -this.getX(),
            -this.getY(),
            -this.getZ()
        ]);
    };
    Vec3.prototype.sub = function (w) {
        var v = this;
        return new Vec3([
            v.getX() - w.getX(),
            v.getY() - w.getY(),
            v.getZ() - w.getZ()
        ]);
    };
    Vec3.prototype.scale = function (a) {
        var v = this;
        return new Vec3([
            a * v.getX(),
            a * v.getY(),
            a * v.getZ()
        ]);
    };
    Vec3.prototype.dot = function (w) {
        var v = this;
        return v.getX() * w.getX() + v.getY() * w.getY() + v.getZ() * w.getZ();
    };
    Vec3.prototype.len = function () {
        return Math.sqrt(this.dot(this));
    };
    Vec3.prototype.norm = function () {
        var len = this.len();
        return len === 0 ? this : this.scale(1 / len);
    };
    Vec3.prototype.cross = function (w) {
        var v = this;
        return new Vec3([
            v.getY() * w.getZ() - v.getZ() * w.getY(),
            v.getZ() * w.getX() - v.getX() * w.getZ(),
            v.getX() * w.getY() - v.getY() * w.getX()
        ]);
    };
    Vec3.prototype.distance = function (w) {
        var v = this;
        return Math.sqrt(Math.pow(v.getX() - w.getX(), 2) +
            Math.pow(v.getY() - w.getY(), 2) +
            Math.pow(v.getZ() - w.getZ(), 2));
    };
    Vec3.prototype.toString = function () {
        return this.getX() + "," + this.getY() + "," + this.getZ();
    };
    return Vec3;
})();
var Line = (function () {
    function Line(o, d) {
        this.o = o;
        this.d = d.norm();
    }
    Line.prototype.getPoint = function (distance) {
        return this.o.add(this.d.scale(distance));
    };
    return Line;
})();
var Sphere = (function () {
    function Sphere(o, r) {
        this.o = o;
        this.r = r;
    }
    Sphere.prototype.pointOnSphere = function (p) {
        return Math.abs(p.distance(this.o) - this.r) < epsilon;
    };
    Sphere.prototype.normal = function (p) {
        return new Vec3([
            (p.getX() - this.o.getX()) / this.r,
            (p.getY() - this.o.getY()) / this.r,
            (p.getZ() - this.o.getZ()) / this.r
        ]);
    };
    Sphere.prototype.intersect = function (l) {
        var q = l.d.dot(l.o.sub(this.o)), t = Math.pow(q, 2) - Math.pow(l.o.distance(this.o), 2) + Math.pow(this.r, 2);
        if (t < 0 || (typeof t === 'number' && isNaN(t))) {
            return [];
        }
        else if (t === 0) {
            var x = l.getPoint(-q);
            if (!this.pointOnSphere(x)) {
                throw new Error("Solution points " + x + " not on sphere.");
            }
            return [x]; //One solution (Two points at same postion that tangent the sphere)
        }
        else {
            t = Math.sqrt(t);
            var x0 = l.getPoint(-q - t), x1 = l.getPoint(-q + t);
            if (!this.pointOnSphere(x0)) {
                throw new Error("Solution " + x0 + " point not on sphere.");
            }
            if (!this.pointOnSphere(x1)) {
                throw new Error("Solution " + x1 + " point not on sphere.");
            }
            return [x0, x1]; //Two unique solutions   
        }
    };
    return Sphere;
})();
var PolarCoordinate = (function () {
    function PolarCoordinate(lat, lon, alt) {
        this.lat = lat;
        this.lon = lon;
        this.alt = alt;
    }
    PolarCoordinate.prototype.convert = function () {
        return new Vec3([
            this.alt * Math.cos(this.lat) * Math.cos(this.lon),
            this.alt * Math.cos(this.lat) * Math.sin(this.lon),
            this.alt * Math.sin(this.lat)
        ]);
    };
    return PolarCoordinate;
})();
var RountingPointPairs = (function () {
    function RountingPointPairs(source, target) {
        this.source = source;
        this.target = target;
        this.distance = this.source.position.distance(this.target.position);
    }
    return RountingPointPairs;
})();
var RouteingPoint = (function () {
    function RouteingPoint(name, polarCoord) {
        this.name = name;
        this.position = polarCoord.convert();
    }
    return RouteingPoint;
})();
var Router = (function () {
    function Router(routes) {
        var _this = this;
        this.earth = new Sphere(new Vec3([0, 0, 0]), 6371);
        this.routes = routes
            .map(function (s) {
            s.availiableRoutingPoints = s.availiableRoutingPoints || [];
            if (['start', 'end'].indexOf(s.name) === -1) {
                s.availiableRoutingPoints = routes
                    .filter(function (q) {
                    return q !== s &&
                        ['start', 'end'].indexOf(q.name) === -1 &&
                        _this.earth.intersect(new Line(s.position, q.position)).length === 0; //Is not self and does not intersect earth 
                })
                    .map(function (x) { return new RountingPointPairs(s, x); })
                    .filter(function (x) { return s.availiableRoutingPoints.indexOf(x) === -1; })
                    .sort(function (a, b) { return a.distance - b.distance; });
            }
            else {
                //Start and end points will intersect below (behind?) the point
                // We must check the surface normal the direction if it is infront of the point
                var surfaceNormal = _this.earth.normal(s.position);
                s.availiableRoutingPoints = s.availiableRoutingPoints.concat(routes
                    .filter(function (q) {
                    var dot = q.position.sub(s.position).norm().dot(surfaceNormal);
                    return q !== s &&
                        dot > 0;
                })
                    .map(function (x) { return new RountingPointPairs(s, x); })
                    .filter(function (x) { return s.availiableRoutingPoints.indexOf(x) === -1; })
                    .sort(function (a, b) { return a.distance - b.distance; }));
            }
            return s;
        });
    }
    Router.prototype.route = function (start, end) {
        var len = this.routes.length;
        var path = [];
        var pathPos = [];
        var distance = 0;
        var flattenChildren = function (start) {
            var childrenJumps = [[start]];
            var jumps = 1;
            var visitedNodes = [];
            var toSearch = [start];
            while (toSearch.length > 0) {
                var currentNode = toSearch.shift();
                var children = currentNode.availiableRoutingPoints
                    .filter(function (x) { return visitedNodes.indexOf(currentNode) === -1; })
                    .map(function (x) { return x.target; });
                if (children.length === 0) {
                    continue;
                }
                childrenJumps[jumps] = children;
                visitedNodes.push(currentNode);
                toSearch = toSearch.concat(children);
                jumps += 1;
            }
            return childrenJumps;
        };
        var startDir = flattenChildren(start);
        var endDir = flattenChildren(end);
        outer_loop: for (var i = 0; i < startDir.length; i++) {
            for (var j = 0; j < endDir.length; j++) {
                if (startDir[i].some(function (x) { return endDir[j].indexOf(x) > -1; })) {
                    //Match
                    pathPos = endDir[j].map(function (x) { return x.position; }).concat(end.position);
                    path = endDir[j].map(function (x) { return x.name; }).concat(end.name);
                    break outer_loop;
                }
            }
        }
        // var flattenGraph = function (visitedNodes: RouteingPoint[] = []) {
        //     return function (currentNode: RouteingPoint) {
        //         console.log('Flatten:', currentNode);
        //         visitedNodes.push(currentNode);
        //         var children = currentNode.availiableRoutingPoints
        //                 .filter(x => visitedNodes.indexOf(currentNode) === -1)
        //                 .map(x => flattenGraph(visitedNodes)(x.target));
        //         return [currentNode].concat(
        //             children
        //         );
        //     };
        // };
        // console.log(flattenGraph([])(start));
        // var decent = function decentFn (currentNode: RouteingPoint, visitedNodes: RouteingPoint[], maxDepth: number) {
        //     // console.log(maxDepth, currentNode)
        //     if (maxDepth === 0) {
        //         return visitedNodes;
        //     }
        //     return currentNode.availiableRoutingPoints
        //         .filter(x => visitedNodes.indexOf(x.target) === -1)
        //         .map(x => decent(x.target, visitedNodes.concat([currentNode]), maxDepth-1))
        //         .reduce((x, y) => x.concat(y), []);
        // };
        // console.log(decent(start, [], 2));
        // console.log(decent(end, [], 2));
        // var distanceArr: number[] = [];
        // //Floyd–Warshall_algorithm
        // //Preset all distances to infinity
        // var i = len;
        // while (i--) {
        //     distanceArr[i] = Infinity;
        // }
        // //Distance from start to start is zero
        // i = len;
        // while (i--) {
        //     var u = this.routes[i];
        //     distanceArr[i] = 0;  
        //     // if (u == end) {
        //     //     break;
        //     // }
        //     console.groupCollapsed(u.name);
        //     for (var neighbor of u.availiableRoutingPoints) {
        //         var neighborIndex = this.routes.indexOf(neighbor.target);
        //         var alt = distanceArr[i] + neighbor.distance;
        //         console.log(neighbor.target.name, alt);
        //         if (alt < distanceArr[neighborIndex]) {
        //             distance += alt;
        //             distanceArr[neighborIndex] = alt;
        //             path.push(u.name);
        //             pathPos.push(u.position)
        //         }
        //     }
        //     console.groupEnd();
        // }
        var answer = {
            path: path,
            pathPos: pathPos,
            distance: distance
        };
        console.log('answer:', answer);
        return answer;
        // //Check if some satelite has both start and end
        // var onlyOneSatelite = start.availiableRoutingPoints.filter(x => {
        //     return x.target.availiableRoutingPoints.some(y => y.target === end);
        // }).sort((a, b) => a.distance - b.distance);
        // if (onlyOneSatelite.length > 0) {
        //     console.log('only one satelite needed');
        //     return {
        //         path: [start.name, onlyOneSatelite[0].target.name, end.name],
        //         pathPos: [start.position, onlyOneSatelite[0].target.position, end.position],
        //         distance: onlyOneSatelite[0].distance
        //     };
        // }
        // var recursiveDecent = (node: RouteingPoint, finish: RouteingPoint, answer: IAnswer, visited: RountingPointPairs[]  = []): IAnswer => {
        //     var availiableRoutingPoints = node.availiableRoutingPoints.filter(x => visited.indexOf(x) === -1);
        //     if (availiableRoutingPoints.length === 0 || visited.length > 6) {
        //         return {
        //             distance: Infinity,
        //             path: ['NO_SOLUTION'],
        //             pathPos: []
        //         };
        //     } else if (availiableRoutingPoints.map(x => x.target).indexOf(finish) > -1) {
        //         //[We are done]
        //         return {
        //             distance: answer.distance,
        //             path: answer.path.concat([node.name, finish.name]),
        //             pathPos: answer.pathPos.concat([node.position, finish.position])
        //         };
        //     } else {
        //         var paths = availiableRoutingPoints
        //             //Prevent backtracking
        //             .filter(n => answer.path.indexOf(n.source.name) === -1)
        //             //Recursive decent down child nodes
        //             .map(n => recursiveDecent(
        //                     n.target,
        //                     finish,
        //                     {
        //                         distance: answer.distance + n.distance,
        //                         path: answer.path.concat([n.source.name]),
        //                         pathPos: answer.pathPos.concat([n.source.position])
        //                     },
        //                     visited.concat([n])
        //                 )
        //             )
        //             //We only want solutions
        //             .filter(n => n && n.distance !== Infinity);
        //         var best = paths.sort((a, b) => a.distance - b.distance)[0];
        //         return best;
        //     }
        // };
        // //Walk the tree
        // return recursiveDecent(start, end, {
        //     path: [],
        //     pathPos: [],
        //     distance: 0
        // });
    };
    Router.prototype.minimum = function (arr) {
        var minIndex = 0, minValue = arr[0];
        arr.forEach(function (x, i) {
            if (arr[i] < minValue) {
                minIndex = i;
                minValue = arr[i];
            }
        });
        return {
            index: minIndex,
            value: minValue
        };
    };
    return Router;
})();
//Helper function to parse data
var parse = function parseFn(text) {
    var result;
    var rows = text
        .split(/[\r\n]+/);
    var routeingPoints = rows
        .filter(function (x, i) { return i > 0 && i < rows.length - 1; })
        .map(function (row) {
        var values = row.split(',');
        return new RouteingPoint(values[0], new PolarCoordinate(+values[1], +values[2], +values[3] + 6371));
    });
    var earthPoints = rows[rows.length - 1].split(',');
    //[NOTE] - Add one to earth radious for altidude, to prevent to tangent intersection with sphere
    var start = new RouteingPoint('start', new PolarCoordinate(+earthPoints[1], +earthPoints[2], 6371 + epsilon));
    var end = new RouteingPoint('end', new PolarCoordinate(+earthPoints[3], +earthPoints[4], 6371 + epsilon));
    //Add start and end to routeingPoints
    routeingPoints.unshift(start);
    routeingPoints.push(end);
    var router = new Router(routeingPoints);
    var answer = router.route(start, end);
    var retVal = {
        seed: rows[0],
        routeingPoints: routeingPoints.map(function (x) {
            return {
                name: x.name,
                position: x.position,
                availiableRoutingPoints: x.availiableRoutingPoints.map(function (y) {
                    return {
                        name: y.target.name,
                        position: y.target.position
                    };
                })
            };
        }),
        start: {
            name: start.name,
            position: start.position,
            availiableRoutingPoints: start.availiableRoutingPoints.map(function (y) {
                return {
                    name: y.target.name,
                    position: y.target.position
                };
            })
        },
        end: {
            name: end.name,
            position: end.position,
            availiableRoutingPoints: end.availiableRoutingPoints.map(function (y) {
                return {
                    name: y.target.name,
                    position: y.target.position
                };
            })
        },
        answer: answer
    };
    console.log('result:', retVal);
    return retVal;
};
// window.result = parse(`#SEED: 0.15050181397236884
// SAT0,27.366718183277968,-98.8780108301933,315.48216869233056
// SAT1,-45.87656992123351,174.70036036583411,624.231229228254
// SAT2,38.476172673602036,-175.53921274031035,414.9954105226449
// SAT3,-70.32564329652426,25.643034339950418,673.2623317910093
// SAT4,-63.016904731666905,96.43855560058114,468.6637283053949
// SAT5,49.824518992706174,134.0880963884111,612.8659135879406
// SAT6,-61.916440909274286,-68.61415658543805,666.3057834872683
// SAT7,-4.397508556316723,-37.11875780902159,669.7516590780235
// SAT8,-61.94563603217459,63.02138227235477,633.0125284176954
// SAT9,61.25966645988686,-107.51945355529342,360.5823366407088
// SAT10,-26.442157265872638,114.09789986350972,410.65581980961326
// SAT11,48.432802109428565,109.32468552495783,504.48406444813037
// SAT12,59.998087218078666,155.49786973131057,600.7041906836546
// SAT13,-40.258544068249655,130.5566416706402,619.8258434820461
// SAT14,-53.42782551682608,162.75886267836603,683.2628594962157
// SAT15,-20.656913317066056,-79.07525471532652,583.6645808336905
// SAT16,-10.652012014526335,-120.72043914330499,628.6041112028761
// SAT17,13.408178254422808,-101.02954826418674,507.95320836895155
// SAT18,-49.396139631934226,68.19486116066574,494.9908868776713
// SAT19,85.45465890170158,0.8728516688020704,678.6543760248421
// ROUTE,-37.88624966373936,-165.72598804053638,66.28661538569315,73.4048850932341`);
window.result = window.fetch('https://space-fast-track.herokuapp.com/generate')
    .then(function (x) { return x.text(); })
    .then(function (x) { return parse(x); });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsiVmVjMyIsIlZlYzMuY29uc3RydWN0b3IiLCJWZWMzLmdldFgiLCJWZWMzLmdldFkiLCJWZWMzLmdldFoiLCJWZWMzLmFkZCIsIlZlYzMubmVnIiwiVmVjMy5zdWIiLCJWZWMzLnNjYWxlIiwiVmVjMy5kb3QiLCJWZWMzLmxlbiIsIlZlYzMubm9ybSIsIlZlYzMuY3Jvc3MiLCJWZWMzLmRpc3RhbmNlIiwiVmVjMy50b1N0cmluZyIsIkxpbmUiLCJMaW5lLmNvbnN0cnVjdG9yIiwiTGluZS5nZXRQb2ludCIsIlNwaGVyZSIsIlNwaGVyZS5jb25zdHJ1Y3RvciIsIlNwaGVyZS5wb2ludE9uU3BoZXJlIiwiU3BoZXJlLm5vcm1hbCIsIlNwaGVyZS5pbnRlcnNlY3QiLCJQb2xhckNvb3JkaW5hdGUiLCJQb2xhckNvb3JkaW5hdGUuY29uc3RydWN0b3IiLCJQb2xhckNvb3JkaW5hdGUuY29udmVydCIsIlJvdW50aW5nUG9pbnRQYWlycyIsIlJvdW50aW5nUG9pbnRQYWlycy5jb25zdHJ1Y3RvciIsIlJvdXRlaW5nUG9pbnQiLCJSb3V0ZWluZ1BvaW50LmNvbnN0cnVjdG9yIiwiUm91dGVyIiwiUm91dGVyLmNvbnN0cnVjdG9yIiwiUm91dGVyLnJvdXRlIiwiUm91dGVyLm1pbmltdW0iLCJwYXJzZUZuIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFHbkIsQUFEQSxrREFBa0Q7O0lBSTlDQSxjQUFZQSxHQUFhQTtRQUlyQkMsQUFIQUE7O1dBRUdBO1FBQ0hBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RCQSxNQUFNQSxJQUFJQSxTQUFTQSxDQUFDQSxvREFBb0RBLENBQUNBLENBQUNBO1FBQzlFQSxDQUFDQTtRQUVEQSxFQUFFQSxD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QSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQTtJQUMzRUEsQ0FBQ0E7SUFFTVQsa0JBQUdBLEdBQVZBO1FBQ0lVLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO0lBQ3JDQSxDQUFDQTtJQUVNVixtQkFBSUEsR0FBWEE7UUFDSVcsSUFBSUEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0E7UUFDckJBLE1BQU1BLENBQUNBLEdBQUdBLEtBQUtBLENBQUNBLEdBQUdBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO0lBQ2xEQSxDQUFDQTtJQUVNWCxvQkFBS0EsR0FBWkEsVUFBY0EsQ0FBT0E7UUFDakJZLElBQUlBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2JBLE1BQU1BLENBQUNBLElBQUlBLElBQUlBLENBQUNBO1lBQ1pBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBO1lBQ3pDQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQTtZQUN6Q0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUE7U0FDNUNBLENBQUNBLENBQUNBO0lBQ1BB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QUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQzVCQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVqRkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsS0FBS0EsUUFBUUEsSUFBSUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDL0NBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBQ2RBLENBQUNBO1FBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ2pCQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUV2QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3pCQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxxQkFBbUJBLENBQUNBLG9CQUFpQkEsQ0FBQ0EsQ0FBQ0E7WUFDM0RBLENBQUNBO1lBRURBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLG1FQUFtRUE7WUFBcEVBLEpBQ2ZBLENBQUNBO1FBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ0pBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBRWpCQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUN2QkEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFNUJBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGFBQWFBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUMxQkEsTUFBTUEsSUFBSUEsS0FBS0EsQ0FBQ0EsY0FBWUEsRUFBRUEsMEJBQXVCQSxDQUFDQSxDQUFDQTtZQUMzREEsQ0FBQ0E7WUFFREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzFCQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxjQUFZQSxFQUFFQSwwQkFBdUJBLENBQUNBLENBQUNBO1lBQzNEQSxDQUFDQTtZQUVEQSxNQUFNQSxDQUFDQSxDQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSx5QkFBeUJBO1lBQTFCQSxKQUNwQkEsQ0FBQ0E7SUFDTEEsQ0FBQ0E7SUFDTEosYUFBQ0E7QUFBREEsQ0FBQ0EsQUFwREQsSUFvREM7QUFFRDtJQUtJSyx5QkFBYUEsR0FBV0EsRUFBRUEsR0FBV0EsRUFBRUEsR0FBV0E7UUFDOUNDLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBO1FBQ2ZBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBO1FBQ2ZBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBO0lBQ25CQSxDQUFDQTtJQUVNRCxpQ0FBT0EsR0FBZEE7UUFDSUUsTUFBTUEsQ0FBQ0EsSUFBSUEsSUFBSUEsQ0FBQ0E7WUFDWkEsSUFBSUEsQ0FBQ0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0E7WUFDbERBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBO1lBQ2xEQSxJQUFJQSxDQUFDQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQTtTQUNoQ0EsQ0FBQ0EsQ0FBQ0E7SUFDUEEsQ0FBQ0E7SUFDTEYsc0JBQUNBO0FBQURBLENBQUNBLEFBbEJELElBa0JDO0FBRUQ7SUFLSUcsNEJBQWFBLE1BQXFCQSxFQUFFQSxNQUFxQkE7UUFDckRDLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLE1BQU1BLENBQUNBO1FBQ3JCQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxNQUFNQSxDQUFDQTtRQUNyQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7SUFDeEVBLENBQUNBO0lBQ0xELHlCQUFDQTtBQUFEQSxDQUFDQSxBQVZELElBVUM7QUFFRDtJQU9JRSx1QkFBWUEsSUFBWUEsRUFBRUEsVUFBMkJBO1FBQ2pEQyxJQUFJQSxDQUFDQSxJQUFJQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUNqQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsVUFBVUEsQ0FBQ0EsT0FBT0EsRUFBRUEsQ0FBQ0E7SUFDekNBLENBQUNBO0lBQ0xELG9CQUFDQTtBQUFEQSxDQUFDQSxBQVhELElBV0M7QUFNRDtJQUlJRSxnQkFBYUEsTUFBdUJBO1FBSnhDQyxpQkFzUUNBO1FBalFPQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxNQUFNQSxDQUFDQSxJQUFJQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUVuREEsSUFBSUEsQ0FBQ0EsTUFBTUEsR0FBR0EsTUFBTUE7YUFDZkEsR0FBR0EsQ0FBQ0EsVUFBQUEsQ0FBQ0E7WUFDRkEsQ0FBQ0EsQ0FBQ0EsdUJBQXVCQSxHQUFHQSxDQUFDQSxDQUFDQSx1QkFBdUJBLElBQUlBLEVBQUVBLENBQUNBO1lBQzVEQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxPQUFPQSxFQUFFQSxLQUFLQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDMUNBLENBQUNBLENBQUNBLHVCQUF1QkEsR0FBR0EsTUFBTUE7cUJBQzdCQSxNQUFNQSxDQUFDQSxVQUFBQSxDQUFDQTtvQkFDTEEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7d0JBQ1ZBLENBQUNBLE9BQU9BLEVBQUVBLEtBQUtBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO3dCQUN2Q0EsS0FBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsS0FBS0EsQ0FBQ0EsRUFBRUEsMkNBQTJDQTtvQkFBNUNBLEpBQzVFQSxDQUFDQSxDQUFDQTtxQkFDREEsR0FBR0EsQ0FBQ0EsVUFBQUEsQ0FBQ0EsSUFBSUEsT0FBQUEsSUFBSUEsa0JBQWtCQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUE1QkEsQ0FBNEJBLENBQUNBO3FCQUV0Q0EsTUFBTUEsQ0FBQ0EsVUFBQUEsQ0FBQ0EsSUFBSUEsT0FBQUEsQ0FBQ0EsQ0FBQ0EsdUJBQXVCQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxFQUEzQ0EsQ0FBMkNBLENBQUNBO3FCQUV4REEsSUFBSUEsQ0FBQ0EsVUFBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsSUFBS0EsT0FBQUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsRUFBdkJBLENBQXVCQSxDQUFDQSxDQUFDQTtZQUNqREEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBR0pBLEFBRkFBLCtEQUErREE7Z0JBQy9EQSwrRUFBK0VBO29CQUMzRUEsYUFBYUEsR0FBR0EsS0FBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7Z0JBRWxEQSxDQUFDQSxDQUFDQSx1QkFBdUJBLEdBQUdBLENBQUNBLENBQUNBLHVCQUF1QkEsQ0FBQ0EsTUFBTUEsQ0FDeERBLE1BQU1BO3FCQUNMQSxNQUFNQSxDQUFDQSxVQUFBQSxDQUFDQTtvQkFDTEEsSUFBSUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7b0JBQy9EQSxNQUFNQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQTt3QkFDVkEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQUE7Z0JBQ2ZBLENBQUNBLENBQUNBO3FCQUNEQSxHQUFHQSxDQUFDQSxVQUFBQSxDQUFDQSxJQUFJQSxPQUFBQSxJQUFJQSxrQkFBa0JBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLEVBQTVCQSxDQUE0QkEsQ0FBQ0E7cUJBRXRDQSxNQUFNQSxDQUFDQSxVQUFBQSxDQUFDQSxJQUFJQSxPQUFBQSxDQUFDQSxDQUFDQSx1QkFBdUJBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEVBQTNDQSxDQUEyQ0EsQ0FBQ0E7cUJBRXhEQSxJQUFJQSxDQUFDQSxVQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFLQSxPQUFBQSxDQUFDQSxDQUFDQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFDQSxRQUFRQSxFQUF2QkEsQ0FBdUJBLENBQUNBLENBQzNDQSxDQUFDQTtZQVNOQSxDQUFDQTtZQUVEQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNiQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUNYQSxDQUFDQTtJQUVNRCxzQkFBS0EsR0FBWkEsVUFBY0EsS0FBb0JBLEVBQUVBLEdBQWtCQTtRQUNsREUsSUFBSUEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7UUFFN0JBLElBQUlBLElBQUlBLEdBQWFBLEVBQUVBLENBQUNBO1FBQ3hCQSxJQUFJQSxPQUFPQSxHQUFXQSxFQUFFQSxDQUFDQTtRQUN6QkEsSUFBSUEsUUFBUUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFakJBLElBQUlBLGVBQWVBLEdBQUdBLFVBQVVBLEtBQW9CQTtZQUNoRCxJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7WUFDZCxJQUFJLFlBQVksR0FBb0IsRUFBRSxDQUFDO1lBQ3ZDLElBQUksUUFBUSxHQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3hDLE9BQU8sUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDekIsSUFBSSxXQUFXLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNuQyxJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsdUJBQXVCO3FCQUM3QyxNQUFNLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxZQUFZLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUF4QyxDQUF3QyxDQUFDO3FCQUNyRCxHQUFHLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsTUFBTSxFQUFSLENBQVEsQ0FBQyxDQUFDO2dCQUV4QixFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3hCLFFBQVEsQ0FBQztnQkFDYixDQUFDO2dCQUVELGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxRQUFRLENBQUM7Z0JBRWhDLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBRS9CLFFBQVEsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUVyQyxLQUFLLElBQUksQ0FBQyxDQUFDO1lBQ2YsQ0FBQztZQUVELE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDekIsQ0FBQyxDQUFDQTtRQUVGQSxJQUFJQSxRQUFRQSxHQUFHQSxlQUFlQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQTtRQUN0Q0EsSUFBSUEsTUFBTUEsR0FBR0EsZUFBZUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFFbENBLFVBQVVBLEVBQ1ZBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLFFBQVFBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQ3ZDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxNQUFNQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxFQUFFQSxDQUFDQTtnQkFDckNBLEVBQUVBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQUFBLENBQUNBLElBQUlBLE9BQUFBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEVBQXpCQSxDQUF5QkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBRW5EQSxBQURBQSxPQUFPQTtvQkFDUEEsT0FBT0EsR0FBR0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBQUEsQ0FBQ0EsSUFBSUEsT0FBQUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsRUFBVkEsQ0FBVUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7b0JBQzlEQSxJQUFJQSxHQUFHQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFBQSxDQUFDQSxJQUFJQSxPQUFBQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFOQSxDQUFNQSxDQUFDQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtvQkFDbkRBLEtBQUtBLENBQUNBLFVBQVVBLENBQUNBO2dCQUNyQkEsQ0FBQ0E7WUFDTEEsQ0FBQ0E7UUFDTEEsQ0FBQ0E7UUF3RURBLEFBdEVBQSxxRUFBcUVBO1FBQ3JFQSxxREFBcURBO1FBQ3JEQSxnREFBZ0RBO1FBQ2hEQSwwQ0FBMENBO1FBRTFDQSw2REFBNkRBO1FBQzdEQSx5RUFBeUVBO1FBQ3pFQSxtRUFBbUVBO1FBRW5FQSx1Q0FBdUNBO1FBQ3ZDQSx1QkFBdUJBO1FBQ3ZCQSxhQUFhQTtRQUNiQSxTQUFTQTtRQUNUQSxLQUFLQTtRQUVMQSx3Q0FBd0NBO1FBRXhDQSxpSEFBaUhBO1FBQ2pIQSw0Q0FBNENBO1FBQzVDQSw0QkFBNEJBO1FBQzVCQSwrQkFBK0JBO1FBQy9CQSxRQUFRQTtRQUNSQSxpREFBaURBO1FBQ2pEQSw4REFBOERBO1FBQzlEQSxzRkFBc0ZBO1FBQ3RGQSw4Q0FBOENBO1FBQzlDQSxLQUFLQTtRQUVMQSxxQ0FBcUNBO1FBQ3JDQSxtQ0FBbUNBO1FBRW5DQSxrQ0FBa0NBO1FBQ2xDQSw2QkFBNkJBO1FBRTdCQSxxQ0FBcUNBO1FBQ3JDQSxlQUFlQTtRQUNmQSxnQkFBZ0JBO1FBQ2hCQSxpQ0FBaUNBO1FBQ2pDQSxJQUFJQTtRQUdKQSx5Q0FBeUNBO1FBRXpDQSxXQUFXQTtRQUNYQSxnQkFBZ0JBO1FBQ2hCQSw4QkFBOEJBO1FBQzlCQSw0QkFBNEJBO1FBQzVCQSx5QkFBeUJBO1FBQ3pCQSxvQkFBb0JBO1FBQ3BCQSxXQUFXQTtRQUVYQSxzQ0FBc0NBO1FBRXRDQSx3REFBd0RBO1FBQ3hEQSxvRUFBb0VBO1FBQ3BFQSx3REFBd0RBO1FBRXhEQSxrREFBa0RBO1FBRWxEQSxrREFBa0RBO1FBQ2xEQSwrQkFBK0JBO1FBQy9CQSxnREFBZ0RBO1FBQ2hEQSxpQ0FBaUNBO1FBQ2pDQSx1Q0FBdUNBO1FBQ3ZDQSxZQUFZQTtRQUNaQSxRQUFRQTtRQUVSQSwwQkFBMEJBO1FBQzFCQSxJQUFJQTtZQUVBQSxNQUFNQSxHQUFHQTtZQUNUQSxJQUFJQSxFQUFFQSxJQUFJQTtZQUNWQSxPQUFPQSxFQUFFQSxPQUFPQTtZQUNoQkEsUUFBUUEsRUFBRUEsUUFBUUE7U0FDckJBLENBQUNBO1FBRUZBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLFNBQVNBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO1FBRS9CQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUVkQSxrREFBa0RBO1FBQ2xEQSxvRUFBb0VBO1FBQ3BFQSwyRUFBMkVBO1FBQzNFQSw4Q0FBOENBO1FBQzlDQSxvQ0FBb0NBO1FBQ3BDQSwrQ0FBK0NBO1FBQy9DQSxlQUFlQTtRQUNmQSx3RUFBd0VBO1FBQ3hFQSx1RkFBdUZBO1FBQ3ZGQSxnREFBZ0RBO1FBQ2hEQSxTQUFTQTtRQUNUQSxJQUFJQTtRQUdKQSx5SUFBeUlBO1FBRXpJQSx5R0FBeUdBO1FBRXpHQSx3RUFBd0VBO1FBQ3hFQSxtQkFBbUJBO1FBQ25CQSxrQ0FBa0NBO1FBQ2xDQSxxQ0FBcUNBO1FBQ3JDQSwwQkFBMEJBO1FBQzFCQSxhQUFhQTtRQUNiQSxvRkFBb0ZBO1FBQ3BGQSwwQkFBMEJBO1FBQzFCQSxtQkFBbUJBO1FBQ25CQSx5Q0FBeUNBO1FBQ3pDQSxrRUFBa0VBO1FBQ2xFQSwrRUFBK0VBO1FBQy9FQSxhQUFhQTtRQUNiQSxlQUFlQTtRQUNmQSw4Q0FBOENBO1FBQzlDQSxxQ0FBcUNBO1FBQ3JDQSxzRUFBc0VBO1FBQ3RFQSxrREFBa0RBO1FBQ2xEQSx5Q0FBeUNBO1FBQ3pDQSxnQ0FBZ0NBO1FBQ2hDQSw4QkFBOEJBO1FBQzlCQSx3QkFBd0JBO1FBQ3hCQSxrRUFBa0VBO1FBQ2xFQSxxRUFBcUVBO1FBQ3JFQSw4RUFBOEVBO1FBQzlFQSx5QkFBeUJBO1FBQ3pCQSwwQ0FBMENBO1FBQzFDQSxvQkFBb0JBO1FBQ3BCQSxnQkFBZ0JBO1FBQ2hCQSx1Q0FBdUNBO1FBQ3ZDQSwwREFBMERBO1FBRTFEQSx1RUFBdUVBO1FBQ3ZFQSx1QkFBdUJBO1FBQ3ZCQSxRQUFRQTtRQUNSQSxLQUFLQTtRQUVMQSxrQkFBa0JBO1FBQ2xCQSx1Q0FBdUNBO1FBQ3ZDQSxnQkFBZ0JBO1FBQ2hCQSxtQkFBbUJBO1FBQ25CQSxrQkFBa0JBO1FBQ2xCQSxNQUFNQTtJQUNWQSxDQUFDQTtJQUVPRix3QkFBT0EsR0FBZkEsVUFBaUJBLEdBQWFBO1FBQzFCRyxJQUFJQSxRQUFRQSxHQUFHQSxDQUFDQSxFQUNaQSxRQUFRQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUV0QkEsR0FBR0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsVUFBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDYkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3BCQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFDQTtnQkFDYkEsUUFBUUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLENBQUNBO1FBQ0xBLENBQUNBLENBQUNBLENBQUNBO1FBRUhBLE1BQU1BLENBQUNBO1lBQ0hBLEtBQUtBLEVBQUVBLFFBQVFBO1lBQ2ZBLEtBQUtBLEVBQUVBLFFBQVFBO1NBQ2xCQSxDQUFDQTtJQUNOQSxDQUFDQTtJQUNMSCxhQUFDQTtBQUFEQSxDQUFDQSxBQXRRRCxJQXNRQztBQUdELEFBREEsK0JBQStCO0lBQzNCLEtBQUssR0FBRyxpQkFBa0IsSUFBWTtJQUN0Q0ksSUFBSUEsTUFBTUEsQ0FBQ0E7SUFDWEEsSUFBSUEsSUFBSUEsR0FBR0EsSUFBSUE7U0FDVkEsS0FBS0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsQ0FBQ0E7SUFFdEJBLElBQUlBLGNBQWNBLEdBQUdBLElBQUlBO1NBQ3BCQSxNQUFNQSxDQUFDQSxVQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxJQUFLQSxPQUFBQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxNQUFNQSxHQUFHQSxDQUFDQSxFQUE1QkEsQ0FBNEJBLENBQUNBO1NBQzlDQSxHQUFHQSxDQUFDQSxVQUFBQSxHQUFHQTtRQUNKQSxJQUFJQSxNQUFNQSxHQUFHQSxHQUFHQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUU1QkEsTUFBTUEsQ0FBQ0EsSUFBSUEsYUFBYUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsZUFBZUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDeEdBLENBQUNBLENBQUNBLENBQUNBO0lBQ1BBLElBQUlBLFdBQVdBLEdBQUdBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLEdBQUNBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO0lBR2pEQSxBQURBQSxnR0FBZ0dBO1FBQzVGQSxLQUFLQSxHQUFHQSxJQUFJQSxhQUFhQSxDQUFDQSxPQUFPQSxFQUFFQSxJQUFJQSxlQUFlQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxJQUFJQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUM5R0EsSUFBSUEsR0FBR0EsR0FBR0EsSUFBSUEsYUFBYUEsQ0FBQ0EsS0FBS0EsRUFBRUEsSUFBSUEsZUFBZUEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsSUFBSUEsR0FBR0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFHMUdBLEFBREFBLHFDQUFxQ0E7SUFDckNBLGNBQWNBLENBQUNBLE9BQU9BLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO0lBQzlCQSxjQUFjQSxDQUFDQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtJQUV6QkEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0E7SUFFeENBLElBQUlBLE1BQU1BLEdBQUdBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBO0lBR3RDQSxJQUFJQSxNQUFNQSxHQUFJQTtRQUNWQSxJQUFJQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNiQSxjQUFjQSxFQUFFQSxjQUFjQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFBQSxDQUFDQTtZQUNoQ0EsTUFBTUEsQ0FBQ0E7Z0JBQ0hBLElBQUlBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBO2dCQUNaQSxRQUFRQSxFQUFFQSxDQUFDQSxDQUFDQSxRQUFRQTtnQkFDcEJBLHVCQUF1QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsdUJBQXVCQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFBQSxDQUFDQTtvQkFDcERBLE1BQU1BLENBQUNBO3dCQUNIQSxJQUFJQSxFQUFFQSxDQUFDQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQTt3QkFDbkJBLFFBQVFBLEVBQUVBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLFFBQVFBO3FCQUM5QkEsQ0FBQ0E7Z0JBQ05BLENBQUNBLENBQUNBO2FBQ0xBLENBQUNBO1FBQ05BLENBQUNBLENBQUNBO1FBQ0ZBLEtBQUtBLEVBQUVBO1lBQ0hBLElBQUlBLEVBQUVBLEtBQUtBLENBQUNBLElBQUlBO1lBQ2hCQSxRQUFRQSxFQUFFQSxLQUFLQSxDQUFDQSxRQUFRQTtZQUN4QkEsdUJBQXVCQSxFQUFFQSxLQUFLQSxDQUFDQSx1QkFBdUJBLENBQUNBLEdBQUdBLENBQUNBLFVBQUFBLENBQUNBO2dCQUN4REEsTUFBTUEsQ0FBQ0E7b0JBQ0hBLElBQUlBLEVBQUVBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBO29CQUNuQkEsUUFBUUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsUUFBUUE7aUJBQzlCQSxDQUFDQTtZQUNOQSxDQUFDQSxDQUFDQTtTQUNMQTtRQUNEQSxHQUFHQSxFQUFFQTtZQUNEQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxJQUFJQTtZQUNkQSxRQUFRQSxFQUFFQSxHQUFHQSxDQUFDQSxRQUFRQTtZQUN0QkEsdUJBQXVCQSxFQUFFQSxHQUFHQSxDQUFDQSx1QkFBdUJBLENBQUNBLEdBQUdBLENBQUNBLFVBQUFBLENBQUNBO2dCQUN0REEsTUFBTUEsQ0FBQ0E7b0JBQ0hBLElBQUlBLEVBQUVBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBO29CQUNuQkEsUUFBUUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsUUFBUUE7aUJBQzlCQSxDQUFDQTtZQUNOQSxDQUFDQSxDQUFDQTtTQUNMQTtRQUNEQSxRQUFBQSxNQUFNQTtLQUNUQSxDQUFDQTtJQUVGQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxTQUFTQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtJQUUvQkEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7QUFDbEJBLENBQUNBLENBQUM7QUFnQ0YsQUF6QkEsb0RBQW9EO0FBQ3BELCtEQUErRDtBQUMvRCw4REFBOEQ7QUFDOUQsZ0VBQWdFO0FBQ2hFLCtEQUErRDtBQUMvRCwrREFBK0Q7QUFDL0QsOERBQThEO0FBQzlELGdFQUFnRTtBQUNoRSwrREFBK0Q7QUFDL0QsOERBQThEO0FBQzlELCtEQUErRDtBQUMvRCxrRUFBa0U7QUFDbEUsaUVBQWlFO0FBQ2pFLGdFQUFnRTtBQUNoRSxnRUFBZ0U7QUFDaEUsZ0VBQWdFO0FBQ2hFLGlFQUFpRTtBQUNqRSxrRUFBa0U7QUFDbEUsa0VBQWtFO0FBQ2xFLGdFQUFnRTtBQUNoRSwrREFBK0Q7QUFDL0QscUZBQXFGO0FBSXJGLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxpREFBaUQsQ0FBQztLQUMxRSxJQUFJLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQVIsQ0FBUSxDQUFDO0tBQ25CLElBQUksQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBUixDQUFRLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBlcHNpbG9uID0gMC4wMTtcclxuXHJcbi8vW1RPRE9dIC0gSW5saW5lIGFuZCB1bnJvbGUgb3B0aW1pemUgZm9yIDNkIGNhc2UuXHJcbmNsYXNzIFZlYzMge1xyXG4gICAgcHJpdmF0ZSB2YWx1ZTogRmxvYXQzMkFycmF5O1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihhcnI6IG51bWJlcltdKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXNzZXJ0aW9uc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY29uc3RydXRvciBwYXJhbWV0ZXIgdHlwZS4gQXJyYXkgZXhwZWN0ZWQuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gMykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNvbnN0cnV0b3IgYXJyYXkgbGVuZ3RoLiBMZW5ndGggMyBleHBlY3RlZC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkoYXJyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXR0ZXJzIGZvciAzZCBjb29yZGluYXRlc1xyXG4gICAgICovICAgIFxyXG4gICAgcHVibGljIGdldFggKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzBdO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0WSAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMV07XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRaICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVsyXTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHB1YmxpYyBhZGQgKHc6IFZlYzMpIHtcclxuICAgICAgICB2YXIgdiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKFtcclxuICAgICAgICAgICAgdGhpcy5nZXRYKCkgKyB3LmdldFgoKSxcclxuICAgICAgICAgICAgdGhpcy5nZXRZKCkgKyB3LmdldFkoKSxcclxuICAgICAgICAgICAgdGhpcy5nZXRaKCkgKyB3LmdldFooKSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG5lZyAoKSB7XHJcbiAgICAgICAgdmFyIHYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMyhbIFxyXG4gICAgICAgICAgICAtdGhpcy5nZXRYKCksXHJcbiAgICAgICAgICAgIC10aGlzLmdldFkoKSxcclxuICAgICAgICAgICAgLXRoaXMuZ2V0WigpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBzdWIgKHc6IFZlYzMpIHtcclxuICAgICAgICB2YXIgdiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKFtcclxuICAgICAgICAgICAgdi5nZXRYKCkgLSB3LmdldFgoKSxcclxuICAgICAgICAgICAgdi5nZXRZKCkgLSB3LmdldFkoKSxcclxuICAgICAgICAgICAgdi5nZXRaKCkgLSB3LmdldFooKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgc2NhbGUgKGE6IG51bWJlcikge1xyXG4gICAgICAgIHZhciB2ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzMoW1xyXG4gICAgICAgICAgICBhICogdi5nZXRYKCksXHJcbiAgICAgICAgICAgIGEgKiB2LmdldFkoKSxcclxuICAgICAgICAgICAgYSAqIHYuZ2V0WigpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBkb3QgKHc6IFZlYzMpIHtcclxuICAgICAgICB2YXIgdiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHYuZ2V0WCgpICogdy5nZXRYKCkgKyB2LmdldFkoKSAqIHcuZ2V0WSgpICsgdi5nZXRaKCkgKiB3LmdldFooKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGxlbigpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZG90KHRoaXMpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG5vcm0gKCkge1xyXG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbigpO1xyXG4gICAgICAgIHJldHVybiBsZW4gPT09IDAgPyB0aGlzIDogdGhpcy5zY2FsZSgxIC8gbGVuKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3Jvc3MgKHc6IFZlYzMpIHtcclxuICAgICAgICB2YXIgdiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKFtcclxuICAgICAgICAgICAgdi5nZXRZKCkgKiB3LmdldFooKSAtIHYuZ2V0WigpICogdy5nZXRZKCksXHJcbiAgICAgICAgICAgIHYuZ2V0WigpICogdy5nZXRYKCkgLSB2LmdldFgoKSAqIHcuZ2V0WigpLFxyXG4gICAgICAgICAgICB2LmdldFgoKSAqIHcuZ2V0WSgpIC0gdi5nZXRZKCkgKiB3LmdldFgoKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZGlzdGFuY2UodzogVmVjMykge1xyXG4gICAgICAgIHZhciB2ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KFxyXG4gICAgICAgICAgICBNYXRoLnBvdyh2LmdldFgoKSAtIHcuZ2V0WCgpLCAyKSArXHJcbiAgICAgICAgICAgIE1hdGgucG93KHYuZ2V0WSgpIC0gdy5nZXRZKCksIDIpICtcclxuICAgICAgICAgICAgTWF0aC5wb3codi5nZXRaKCkgLSB3LmdldFooKSwgMilcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0WCgpfSwke3RoaXMuZ2V0WSgpfSwke3RoaXMuZ2V0WigpfWA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIExpbmUge1xyXG4gICAgcHVibGljIG86IFZlYzM7XHJcbiAgICBwdWJsaWMgZDogVmVjMztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvOiBWZWMzLCBkOiBWZWMzKSB7XHJcbiAgICAgICAgdGhpcy5vID0gbztcclxuICAgICAgICB0aGlzLmQgPSBkLm5vcm0oKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldFBvaW50IChkaXN0YW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuby5hZGQodGhpcy5kLnNjYWxlKGRpc3RhbmNlKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNwaGVyZSB7XHJcbiAgICBwdWJsaWMgbzogVmVjMztcclxuICAgIHB1YmxpYyByOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IobzogVmVjMywgcjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5vID0gbztcclxuICAgICAgICB0aGlzLnIgPSByO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcG9pbnRPblNwaGVyZSAocDogVmVjMykge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmFicyhwLmRpc3RhbmNlKHRoaXMubykgLSB0aGlzLnIpIDwgZXBzaWxvbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG5vcm1hbCAocDogVmVjMykge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgICAgIChwLmdldFgoKSAtIHRoaXMuby5nZXRYKCkpIC8gdGhpcy5yLFxyXG4gICAgICAgICAgICAocC5nZXRZKCkgLSB0aGlzLm8uZ2V0WSgpKSAvIHRoaXMucixcclxuICAgICAgICAgICAgKHAuZ2V0WigpIC0gdGhpcy5vLmdldFooKSkgLyB0aGlzLnJcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGludGVyc2VjdCAobDogTGluZSkge1xyXG4gICAgICAgIHZhciBxID0gbC5kLmRvdChsLm8uc3ViKHRoaXMubykpLFxyXG4gICAgICAgICAgICB0ID0gTWF0aC5wb3cocSwgMikgLSBNYXRoLnBvdyhsLm8uZGlzdGFuY2UodGhpcy5vKSwgMikgKyBNYXRoLnBvdyh0aGlzLnIsIDIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiAodCA8IDAgfHwgKHR5cGVvZiB0ID09PSAnbnVtYmVyJyAmJiBpc05hTih0KSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodCA9PT0gMCkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGwuZ2V0UG9pbnQoLXEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBvaW50T25TcGhlcmUoeCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU29sdXRpb24gcG9pbnRzICR7eH0gbm90IG9uIHNwaGVyZS5gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFt4XTsgLy9PbmUgc29sdXRpb24gKFR3byBwb2ludHMgYXQgc2FtZSBwb3N0aW9uIHRoYXQgdGFuZ2VudCB0aGUgc3BoZXJlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHQgPSBNYXRoLnNxcnQodCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgeDAgPSBsLmdldFBvaW50KC1xIC0gdCksXHJcbiAgICAgICAgICAgICAgICB4MSA9IGwuZ2V0UG9pbnQoLXEgKyB0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wb2ludE9uU3BoZXJlKHgwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb2x1dGlvbiAke3gwfSBwb2ludCBub3Qgb24gc3BoZXJlLmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucG9pbnRPblNwaGVyZSh4MSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU29sdXRpb24gJHt4MX0gcG9pbnQgbm90IG9uIHNwaGVyZS5gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFt4MCwgeDFdOyAvL1R3byB1bmlxdWUgc29sdXRpb25zICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2xhckNvb3JkaW5hdGUge1xyXG4gICAgcHVibGljIGxhdDogbnVtYmVyO1xyXG4gICAgcHVibGljIGxvbjogbnVtYmVyO1xyXG4gICAgcHVibGljIGFsdDogbnVtYmVyO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvciAobGF0OiBudW1iZXIsIGxvbjogbnVtYmVyLCBhbHQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubGF0ID0gbGF0O1xyXG4gICAgICAgIHRoaXMubG9uID0gbG9uO1xyXG4gICAgICAgIHRoaXMuYWx0ID0gYWx0O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgY29udmVydCgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzMoW1xyXG4gICAgICAgICAgICB0aGlzLmFsdCAqIE1hdGguY29zKHRoaXMubGF0KSAqIE1hdGguY29zKHRoaXMubG9uKSxcclxuICAgICAgICAgICAgdGhpcy5hbHQgKiBNYXRoLmNvcyh0aGlzLmxhdCkgKiBNYXRoLnNpbih0aGlzLmxvbiksXHJcbiAgICAgICAgICAgIHRoaXMuYWx0ICogTWF0aC5zaW4odGhpcy5sYXQpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbn0gXHJcblxyXG5jbGFzcyBSb3VudGluZ1BvaW50UGFpcnMge1xyXG4gICAgcHVibGljIHNvdXJjZTogUm91dGVpbmdQb2ludDtcclxuICAgIHB1YmxpYyB0YXJnZXQ6IFJvdXRlaW5nUG9pbnQ7XHJcbiAgICBwdWJsaWMgZGlzdGFuY2U6IG51bWJlcjtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IgKHNvdXJjZTogUm91dGVpbmdQb2ludCwgdGFyZ2V0OiBSb3V0ZWluZ1BvaW50KSB7XHJcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHRoaXMuc291cmNlLnBvc2l0aW9uLmRpc3RhbmNlKHRoaXMudGFyZ2V0LnBvc2l0aW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUm91dGVpbmdQb2ludCB7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHBvc2l0aW9uOiBWZWMzO1xyXG4gICAgXHJcbiAgICAvL1NhdGVsaXRlcyBpbiB2aWV3IGZyb20gdGhpcyBvbmVcclxuICAgIHB1YmxpYyBhdmFpbGlhYmxlUm91dGluZ1BvaW50czogUm91bnRpbmdQb2ludFBhaXJzW107XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgcG9sYXJDb29yZDogUG9sYXJDb29yZGluYXRlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9sYXJDb29yZC5jb252ZXJ0KCk7XHJcbiAgICB9XHJcbn1cclxuaW50ZXJmYWNlIElBbnN3ZXIge1xyXG4gICAgZGlzdGFuY2U6IG51bWJlcixcclxuICAgIHBhdGg6IHN0cmluZ1tdLFxyXG4gICAgcGF0aFBvczogVmVjM1tdXHJcbn1cclxuY2xhc3MgUm91dGVyIHtcclxuICAgIHB1YmxpYyByb3V0ZXM6IFJvdXRlaW5nUG9pbnRbXTtcclxuICAgIHB1YmxpYyBlYXJ0aDogU3BoZXJlO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvciAocm91dGVzOiBSb3V0ZWluZ1BvaW50W10pIHtcclxuICAgICAgICB0aGlzLmVhcnRoID0gbmV3IFNwaGVyZShuZXcgVmVjMyhbMCwgMCwgMF0pLCA2MzcxKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnJvdXRlcyA9IHJvdXRlc1xyXG4gICAgICAgICAgICAubWFwKHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyA9IHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMgfHwgW107XHJcbiAgICAgICAgICAgICAgICBpZiAoWydzdGFydCcsICdlbmQnXS5pbmRleE9mKHMubmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyA9IHJvdXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEgIT09IHMgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydzdGFydCcsICdlbmQnXS5pbmRleE9mKHEubmFtZSkgPT09IC0xICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lYXJ0aC5pbnRlcnNlY3QobmV3IExpbmUocy5wb3NpdGlvbiwgcS5wb3NpdGlvbikpLmxlbmd0aCA9PT0gMDsgLy9JcyBub3Qgc2VsZiBhbmQgZG9lcyBub3QgaW50ZXJzZWN0IGVhcnRoIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKHggPT4gbmV3IFJvdW50aW5nUG9pbnRQYWlycyhzLCB4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHggPT4gcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5pbmRleE9mKHgpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9PcmRlciBieSBkaXN0YW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZSAtIGIuZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1N0YXJ0IGFuZCBlbmQgcG9pbnRzIHdpbGwgaW50ZXJzZWN0IGJlbG93IChiZWhpbmQ/KSB0aGUgcG9pbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IGNoZWNrIHRoZSBzdXJmYWNlIG5vcm1hbCB0aGUgZGlyZWN0aW9uIGlmIGl0IGlzIGluZnJvbnQgb2YgdGhlIHBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1cmZhY2VOb3JtYWwgPSB0aGlzLmVhcnRoLm5vcm1hbChzLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzID0gcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvdCA9IHEucG9zaXRpb24uc3ViKHMucG9zaXRpb24pLm5vcm0oKS5kb3Qoc3VyZmFjZU5vcm1hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcSAhPT0gcyAmJiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3QgPiAwIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKHggPT4gbmV3IFJvdW50aW5nUG9pbnRQYWlycyhzLCB4KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHggPT4gcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5pbmRleE9mKHgpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9PcmRlciBieSBkaXN0YW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZSAtIGIuZGlzdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLy9XZSB3YW50IHN5bWV0cmljIHJlbGF0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuZm9yRWFjaChxID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgcS50YXJnZXQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMgPSBxLnRhcmdldC5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKHEudGFyZ2V0LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLmV2ZXJ5KHIgPT4gci50YXJnZXQgIT09IHEuc291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgcS50YXJnZXQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMucHVzaChuZXcgUm91bnRpbmdQb2ludFBhaXJzKHEudGFyZ2V0LCBxLnNvdXJjZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSk7ICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBzOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyByb3V0ZSAoc3RhcnQ6IFJvdXRlaW5nUG9pbnQsIGVuZDogUm91dGVpbmdQb2ludCk6IElBbnN3ZXIge1xyXG4gICAgICAgIHZhciBsZW4gPSB0aGlzLnJvdXRlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHZhciBwYXRoOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHZhciBwYXRoUG9zOiBWZWMzW10gPSBbXTtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBmbGF0dGVuQ2hpbGRyZW4gPSBmdW5jdGlvbiAoc3RhcnQ6IFJvdXRlaW5nUG9pbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkcmVuSnVtcHMgPSBbW3N0YXJ0XV07XHJcbiAgICAgICAgICAgIHZhciBqdW1wcyA9IDE7XHJcbiAgICAgICAgICAgIHZhciB2aXNpdGVkTm9kZXM6IFJvdXRlaW5nUG9pbnRbXSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgdG9TZWFyY2g6IFJvdXRlaW5nUG9pbnRbXSA9IFtzdGFydF07XHJcbiAgICAgICAgICAgIHdoaWxlICh0b1NlYXJjaC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSB0b1NlYXJjaC5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gY3VycmVudE5vZGUuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHNcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHggPT4gdmlzaXRlZE5vZGVzLmluZGV4T2YoY3VycmVudE5vZGUpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAubWFwKHggPT4geC50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuSnVtcHNbanVtcHNdID0gY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZpc2l0ZWROb2Rlcy5wdXNoKGN1cnJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdG9TZWFyY2ggPSB0b1NlYXJjaC5jb25jYXQoY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBqdW1wcyArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5KdW1wcztcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzdGFydERpciA9IGZsYXR0ZW5DaGlsZHJlbihzdGFydCk7XHJcbiAgICAgICAgdmFyIGVuZERpciA9IGZsYXR0ZW5DaGlsZHJlbihlbmQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG91dGVyX2xvb3A6XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFydERpci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVuZERpci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0RGlyW2ldLnNvbWUoeCA9PiBlbmREaXJbal0uaW5kZXhPZih4KSA+IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vTWF0Y2hcclxuICAgICAgICAgICAgICAgICAgICBwYXRoUG9zID0gZW5kRGlyW2pdLm1hcCh4ID0+IHgucG9zaXRpb24pLmNvbmNhdChlbmQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBlbmREaXJbal0ubWFwKHggPT4geC5uYW1lKS5jb25jYXQoZW5kLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyX2xvb3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdmFyIGZsYXR0ZW5HcmFwaCA9IGZ1bmN0aW9uICh2aXNpdGVkTm9kZXM6IFJvdXRlaW5nUG9pbnRbXSA9IFtdKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBmdW5jdGlvbiAoY3VycmVudE5vZGU6IFJvdXRlaW5nUG9pbnQpIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdGbGF0dGVuOicsIGN1cnJlbnROb2RlKTtcclxuICAgICAgICAvLyAgICAgICAgIHZpc2l0ZWROb2Rlcy5wdXNoKGN1cnJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGNoaWxkcmVuID0gY3VycmVudE5vZGUuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHNcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHZpc2l0ZWROb2Rlcy5pbmRleE9mKGN1cnJlbnROb2RlKSA9PT0gLTEpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIC5tYXAoeCA9PiBmbGF0dGVuR3JhcGgodmlzaXRlZE5vZGVzKSh4LnRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gW2N1cnJlbnROb2RlXS5jb25jYXQoXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgY2hpbGRyZW5cclxuICAgICAgICAvLyAgICAgICAgICk7XHJcbiAgICAgICAgLy8gICAgIH07XHJcbiAgICAgICAgLy8gfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhmbGF0dGVuR3JhcGgoW10pKHN0YXJ0KSk7XHJcbiAgICAgIFxyXG4gICAgICAgIC8vIHZhciBkZWNlbnQgPSBmdW5jdGlvbiBkZWNlbnRGbiAoY3VycmVudE5vZGU6IFJvdXRlaW5nUG9pbnQsIHZpc2l0ZWROb2RlczogUm91dGVpbmdQb2ludFtdLCBtYXhEZXB0aDogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKG1heERlcHRoLCBjdXJyZW50Tm9kZSlcclxuICAgICAgICAvLyAgICAgaWYgKG1heERlcHRoID09PSAwKSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gdmlzaXRlZE5vZGVzO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBjdXJyZW50Tm9kZS5hdmFpbGlhYmxlUm91dGluZ1BvaW50c1xyXG4gICAgICAgIC8vICAgICAgICAgLmZpbHRlcih4ID0+IHZpc2l0ZWROb2Rlcy5pbmRleE9mKHgudGFyZ2V0KSA9PT0gLTEpXHJcbiAgICAgICAgLy8gICAgICAgICAubWFwKHggPT4gZGVjZW50KHgudGFyZ2V0LCB2aXNpdGVkTm9kZXMuY29uY2F0KFtjdXJyZW50Tm9kZV0pLCBtYXhEZXB0aC0xKSlcclxuICAgICAgICAvLyAgICAgICAgIC5yZWR1Y2UoKHgsIHkpID0+IHguY29uY2F0KHkpLCBbXSk7XHJcbiAgICAgICAgLy8gfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhkZWNlbnQoc3RhcnQsIFtdLCAyKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZGVjZW50KGVuZCwgW10sIDIpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyB2YXIgZGlzdGFuY2VBcnI6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgLy8gLy9GbG95ZOKAk1dhcnNoYWxsX2FsZ29yaXRobVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC8vUHJlc2V0IGFsbCBkaXN0YW5jZXMgdG8gaW5maW5pdHlcclxuICAgICAgICAvLyB2YXIgaSA9IGxlbjtcclxuICAgICAgICAvLyB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgLy8gICAgIGRpc3RhbmNlQXJyW2ldID0gSW5maW5pdHk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC8vRGlzdGFuY2UgZnJvbSBzdGFydCB0byBzdGFydCBpcyB6ZXJvXHJcblxyXG4gICAgICAgIC8vIGkgPSBsZW47XHJcbiAgICAgICAgLy8gd2hpbGUgKGktLSkge1xyXG4gICAgICAgIC8vICAgICB2YXIgdSA9IHRoaXMucm91dGVzW2ldO1xyXG4gICAgICAgIC8vICAgICBkaXN0YW5jZUFycltpXSA9IDA7ICBcclxuICAgICAgICAvLyAgICAgLy8gaWYgKHUgPT0gZW5kKSB7XHJcbiAgICAgICAgLy8gICAgIC8vICAgICBicmVhaztcclxuICAgICAgICAvLyAgICAgLy8gfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZCh1Lm5hbWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgZm9yICh2YXIgbmVpZ2hib3Igb2YgdS5hdmFpbGlhYmxlUm91dGluZ1BvaW50cykge1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIG5laWdoYm9ySW5kZXggPSB0aGlzLnJvdXRlcy5pbmRleE9mKG5laWdoYm9yLnRhcmdldCk7XHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgYWx0ID0gZGlzdGFuY2VBcnJbaV0gKyBuZWlnaGJvci5kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cobmVpZ2hib3IudGFyZ2V0Lm5hbWUsIGFsdCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgICAgIGlmIChhbHQgPCBkaXN0YW5jZUFycltuZWlnaGJvckluZGV4XSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGRpc3RhbmNlICs9IGFsdDtcclxuICAgICAgICAvLyAgICAgICAgICAgICBkaXN0YW5jZUFycltuZWlnaGJvckluZGV4XSA9IGFsdDtcclxuICAgICAgICAvLyAgICAgICAgICAgICBwYXRoLnB1c2godS5uYW1lKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICBwYXRoUG9zLnB1c2godS5wb3NpdGlvbilcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgY29uc29sZS5ncm91cEVuZCgpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBcclxuICAgICAgICB2YXIgYW5zd2VyID0ge1xyXG4gICAgICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgICAgICBwYXRoUG9zOiBwYXRoUG9zLFxyXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdhbnN3ZXI6JywgYW5zd2VyKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYW5zd2VyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC8vQ2hlY2sgaWYgc29tZSBzYXRlbGl0ZSBoYXMgYm90aCBzdGFydCBhbmQgZW5kXHJcbiAgICAgICAgLy8gdmFyIG9ubHlPbmVTYXRlbGl0ZSA9IHN0YXJ0LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLmZpbHRlcih4ID0+IHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHgudGFyZ2V0LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLnNvbWUoeSA9PiB5LnRhcmdldCA9PT0gZW5kKTtcclxuICAgICAgICAvLyB9KS5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSk7XHJcbiAgICAgICAgLy8gaWYgKG9ubHlPbmVTYXRlbGl0ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdvbmx5IG9uZSBzYXRlbGl0ZSBuZWVkZWQnKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHtcclxuICAgICAgICAvLyAgICAgICAgIHBhdGg6IFtzdGFydC5uYW1lLCBvbmx5T25lU2F0ZWxpdGVbMF0udGFyZ2V0Lm5hbWUsIGVuZC5uYW1lXSxcclxuICAgICAgICAvLyAgICAgICAgIHBhdGhQb3M6IFtzdGFydC5wb3NpdGlvbiwgb25seU9uZVNhdGVsaXRlWzBdLnRhcmdldC5wb3NpdGlvbiwgZW5kLnBvc2l0aW9uXSxcclxuICAgICAgICAvLyAgICAgICAgIGRpc3RhbmNlOiBvbmx5T25lU2F0ZWxpdGVbMF0uZGlzdGFuY2VcclxuICAgICAgICAvLyAgICAgfTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdmFyIHJlY3Vyc2l2ZURlY2VudCA9IChub2RlOiBSb3V0ZWluZ1BvaW50LCBmaW5pc2g6IFJvdXRlaW5nUG9pbnQsIGFuc3dlcjogSUFuc3dlciwgdmlzaXRlZDogUm91bnRpbmdQb2ludFBhaXJzW10gID0gW10pOiBJQW5zd2VyID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIHZhciBhdmFpbGlhYmxlUm91dGluZ1BvaW50cyA9IG5vZGUuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuZmlsdGVyKHggPT4gdmlzaXRlZC5pbmRleE9mKHgpID09PSAtMSk7XHJcblxyXG4gICAgICAgIC8vICAgICBpZiAoYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMubGVuZ3RoID09PSAwIHx8IHZpc2l0ZWQubGVuZ3RoID4gNikge1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBkaXN0YW5jZTogSW5maW5pdHksXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcGF0aDogWydOT19TT0xVVElPTiddLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHBhdGhQb3M6IFtdXHJcbiAgICAgICAgLy8gICAgICAgICB9O1xyXG4gICAgICAgIC8vICAgICB9IGVsc2UgaWYgKGF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLm1hcCh4ID0+IHgudGFyZ2V0KS5pbmRleE9mKGZpbmlzaCkgPiAtMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgLy9bV2UgYXJlIGRvbmVdXHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGRpc3RhbmNlOiBhbnN3ZXIuZGlzdGFuY2UsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcGF0aDogYW5zd2VyLnBhdGguY29uY2F0KFtub2RlLm5hbWUsIGZpbmlzaC5uYW1lXSksXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcGF0aFBvczogYW5zd2VyLnBhdGhQb3MuY29uY2F0KFtub2RlLnBvc2l0aW9uLCBmaW5pc2gucG9zaXRpb25dKVxyXG4gICAgICAgIC8vICAgICAgICAgfTtcclxuICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgICAgIHZhciBwYXRocyA9IGF2YWlsaWFibGVSb3V0aW5nUG9pbnRzXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy9QcmV2ZW50IGJhY2t0cmFja2luZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5maWx0ZXIobiA9PiBhbnN3ZXIucGF0aC5pbmRleE9mKG4uc291cmNlLm5hbWUpID09PSAtMSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAvL1JlY3Vyc2l2ZSBkZWNlbnQgZG93biBjaGlsZCBub2Rlc1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5tYXAobiA9PiByZWN1cnNpdmVEZWNlbnQoXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBuLnRhcmdldCxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZpbmlzaCxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogYW5zd2VyLmRpc3RhbmNlICsgbi5kaXN0YW5jZSxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhbnN3ZXIucGF0aC5jb25jYXQoW24uc291cmNlLm5hbWVdKSxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoUG9zOiBhbnN3ZXIucGF0aFBvcy5jb25jYXQoW24uc291cmNlLnBvc2l0aW9uXSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB2aXNpdGVkLmNvbmNhdChbbl0pXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIClcclxuICAgICAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLy9XZSBvbmx5IHdhbnQgc29sdXRpb25zXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLmZpbHRlcihuID0+IG4gJiYgbi5kaXN0YW5jZSAhPT0gSW5maW5pdHkpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgIHZhciBiZXN0ID0gcGF0aHMuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZSAtIGIuZGlzdGFuY2UpWzBdO1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIGJlc3Q7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC8vV2FsayB0aGUgdHJlZVxyXG4gICAgICAgIC8vIHJldHVybiByZWN1cnNpdmVEZWNlbnQoc3RhcnQsIGVuZCwge1xyXG4gICAgICAgIC8vICAgICBwYXRoOiBbXSxcclxuICAgICAgICAvLyAgICAgcGF0aFBvczogW10sXHJcbiAgICAgICAgLy8gICAgIGRpc3RhbmNlOiAwXHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgbWluaW11bSAoYXJyOiBudW1iZXJbXSkge1xyXG4gICAgICAgIHZhciBtaW5JbmRleCA9IDAsXHJcbiAgICAgICAgICAgIG1pblZhbHVlID0gYXJyWzBdO1xyXG5cclxuICAgICAgICBhcnIuZm9yRWFjaCgoeCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXJyW2ldIDwgbWluVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1pbkluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgIG1pblZhbHVlID0gYXJyW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5kZXg6IG1pbkluZGV4LFxyXG4gICAgICAgICAgICB2YWx1ZTogbWluVmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG4vL0hlbHBlciBmdW5jdGlvbiB0byBwYXJzZSBkYXRhXHJcbnZhciBwYXJzZSA9IGZ1bmN0aW9uIHBhcnNlRm4gKHRleHQ6IHN0cmluZykge1xyXG4gICAgdmFyIHJlc3VsdDtcclxuICAgIHZhciByb3dzID0gdGV4dFxyXG4gICAgICAgIC5zcGxpdCgvW1xcclxcbl0rLyk7XHJcbiAgICBcclxuICAgIHZhciByb3V0ZWluZ1BvaW50cyA9IHJvd3NcclxuICAgICAgICAuZmlsdGVyKCh4LCBpKSA9PiBpID4gMCAmJiBpIDwgcm93cy5sZW5ndGggLSAxKVxyXG4gICAgICAgIC5tYXAocm93ID0+IHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHJvdy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSb3V0ZWluZ1BvaW50KHZhbHVlc1swXSwgbmV3IFBvbGFyQ29vcmRpbmF0ZSgrdmFsdWVzWzFdLCArdmFsdWVzWzJdLCArdmFsdWVzWzNdICsgNjM3MSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgdmFyIGVhcnRoUG9pbnRzID0gcm93c1tyb3dzLmxlbmd0aC0xXS5zcGxpdCgnLCcpO1xyXG4gICAgXHJcbiAgICAvL1tOT1RFXSAtIEFkZCBvbmUgdG8gZWFydGggcmFkaW91cyBmb3IgYWx0aWR1ZGUsIHRvIHByZXZlbnQgdG8gdGFuZ2VudCBpbnRlcnNlY3Rpb24gd2l0aCBzcGhlcmVcclxuICAgIHZhciBzdGFydCA9IG5ldyBSb3V0ZWluZ1BvaW50KCdzdGFydCcsIG5ldyBQb2xhckNvb3JkaW5hdGUoK2VhcnRoUG9pbnRzWzFdLCArZWFydGhQb2ludHNbMl0sIDYzNzEgKyBlcHNpbG9uKSk7XHJcbiAgICB2YXIgZW5kID0gbmV3IFJvdXRlaW5nUG9pbnQoJ2VuZCcsIG5ldyBQb2xhckNvb3JkaW5hdGUoK2VhcnRoUG9pbnRzWzNdLCArZWFydGhQb2ludHNbNF0sIDYzNzEgKyBlcHNpbG9uKSk7XHJcbiAgICBcclxuICAgIC8vQWRkIHN0YXJ0IGFuZCBlbmQgdG8gcm91dGVpbmdQb2ludHNcclxuICAgIHJvdXRlaW5nUG9pbnRzLnVuc2hpZnQoc3RhcnQpO1xyXG4gICAgcm91dGVpbmdQb2ludHMucHVzaChlbmQpO1xyXG4gICAgXHJcbiAgICB2YXIgcm91dGVyID0gbmV3IFJvdXRlcihyb3V0ZWluZ1BvaW50cyk7XHJcblxyXG4gICAgdmFyIGFuc3dlciA9IHJvdXRlci5yb3V0ZShzdGFydCwgZW5kKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB2YXIgcmV0VmFsID0gIHtcclxuICAgICAgICBzZWVkOiByb3dzWzBdLFxyXG4gICAgICAgIHJvdXRlaW5nUG9pbnRzOiByb3V0ZWluZ1BvaW50cy5tYXAoeCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiB4Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogeC5wb3NpdGlvbixcclxuICAgICAgICAgICAgICAgIGF2YWlsaWFibGVSb3V0aW5nUG9pbnRzOiB4LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLm1hcCh5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB5LnRhcmdldC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogeS50YXJnZXQucG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KSxcclxuICAgICAgICBzdGFydDoge1xyXG4gICAgICAgICAgICBuYW1lOiBzdGFydC5uYW1lLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogc3RhcnQucG9zaXRpb24sXHJcbiAgICAgICAgICAgIGF2YWlsaWFibGVSb3V0aW5nUG9pbnRzOiBzdGFydC5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5tYXAoeSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHkudGFyZ2V0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHkudGFyZ2V0LnBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW5kOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IGVuZC5uYW1lLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogZW5kLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICBhdmFpbGlhYmxlUm91dGluZ1BvaW50czogZW5kLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLm1hcCh5ID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeS50YXJnZXQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogeS50YXJnZXQucG9zaXRpb25cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbnN3ZXJcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdyZXN1bHQ6JywgcmV0VmFsKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJldFZhbDtcclxufTtcclxuXHJcbmludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgcmVzdWx0OiBhbnk7XHJcbiAgICBmZXRjaDogKHVybDogc3RyaW5nKSA9PiBhbnk7XHJcbn1cclxuXHJcbi8vIHdpbmRvdy5yZXN1bHQgPSBwYXJzZShgI1NFRUQ6IDAuMTUwNTAxODEzOTcyMzY4ODRcclxuLy8gU0FUMCwyNy4zNjY3MTgxODMyNzc5NjgsLTk4Ljg3ODAxMDgzMDE5MzMsMzE1LjQ4MjE2ODY5MjMzMDU2XHJcbi8vIFNBVDEsLTQ1Ljg3NjU2OTkyMTIzMzUxLDE3NC43MDAzNjAzNjU4MzQxMSw2MjQuMjMxMjI5MjI4MjU0XHJcbi8vIFNBVDIsMzguNDc2MTcyNjczNjAyMDM2LC0xNzUuNTM5MjEyNzQwMzEwMzUsNDE0Ljk5NTQxMDUyMjY0NDlcclxuLy8gU0FUMywtNzAuMzI1NjQzMjk2NTI0MjYsMjUuNjQzMDM0MzM5OTUwNDE4LDY3My4yNjIzMzE3OTEwMDkzXHJcbi8vIFNBVDQsLTYzLjAxNjkwNDczMTY2NjkwNSw5Ni40Mzg1NTU2MDA1ODExNCw0NjguNjYzNzI4MzA1Mzk0OVxyXG4vLyBTQVQ1LDQ5LjgyNDUxODk5MjcwNjE3NCwxMzQuMDg4MDk2Mzg4NDExMSw2MTIuODY1OTEzNTg3OTQwNlxyXG4vLyBTQVQ2LC02MS45MTY0NDA5MDkyNzQyODYsLTY4LjYxNDE1NjU4NTQzODA1LDY2Ni4zMDU3ODM0ODcyNjgzXHJcbi8vIFNBVDcsLTQuMzk3NTA4NTU2MzE2NzIzLC0zNy4xMTg3NTc4MDkwMjE1OSw2NjkuNzUxNjU5MDc4MDIzNVxyXG4vLyBTQVQ4LC02MS45NDU2MzYwMzIxNzQ1OSw2My4wMjEzODIyNzIzNTQ3Nyw2MzMuMDEyNTI4NDE3Njk1NFxyXG4vLyBTQVQ5LDYxLjI1OTY2NjQ1OTg4Njg2LC0xMDcuNTE5NDUzNTU1MjkzNDIsMzYwLjU4MjMzNjY0MDcwODhcclxuLy8gU0FUMTAsLTI2LjQ0MjE1NzI2NTg3MjYzOCwxMTQuMDk3ODk5ODYzNTA5NzIsNDEwLjY1NTgxOTgwOTYxMzI2XHJcbi8vIFNBVDExLDQ4LjQzMjgwMjEwOTQyODU2NSwxMDkuMzI0Njg1NTI0OTU3ODMsNTA0LjQ4NDA2NDQ0ODEzMDM3XHJcbi8vIFNBVDEyLDU5Ljk5ODA4NzIxODA3ODY2NiwxNTUuNDk3ODY5NzMxMzEwNTcsNjAwLjcwNDE5MDY4MzY1NDZcclxuLy8gU0FUMTMsLTQwLjI1ODU0NDA2ODI0OTY1NSwxMzAuNTU2NjQxNjcwNjQwMiw2MTkuODI1ODQzNDgyMDQ2MVxyXG4vLyBTQVQxNCwtNTMuNDI3ODI1NTE2ODI2MDgsMTYyLjc1ODg2MjY3ODM2NjAzLDY4My4yNjI4NTk0OTYyMTU3XHJcbi8vIFNBVDE1LC0yMC42NTY5MTMzMTcwNjYwNTYsLTc5LjA3NTI1NDcxNTMyNjUyLDU4My42NjQ1ODA4MzM2OTA1XHJcbi8vIFNBVDE2LC0xMC42NTIwMTIwMTQ1MjYzMzUsLTEyMC43MjA0MzkxNDMzMDQ5OSw2MjguNjA0MTExMjAyODc2MVxyXG4vLyBTQVQxNywxMy40MDgxNzgyNTQ0MjI4MDgsLTEwMS4wMjk1NDgyNjQxODY3NCw1MDcuOTUzMjA4MzY4OTUxNTVcclxuLy8gU0FUMTgsLTQ5LjM5NjEzOTYzMTkzNDIyNiw2OC4xOTQ4NjExNjA2NjU3NCw0OTQuOTkwODg2ODc3NjcxM1xyXG4vLyBTQVQxOSw4NS40NTQ2NTg5MDE3MDE1OCwwLjg3Mjg1MTY2ODgwMjA3MDQsNjc4LjY1NDM3NjAyNDg0MjFcclxuLy8gUk9VVEUsLTM3Ljg4NjI0OTY2MzczOTM2LC0xNjUuNzI1OTg4MDQwNTM2MzgsNjYuMjg2NjE1Mzg1NjkzMTUsNzMuNDA0ODg1MDkzMjM0MWApO1xyXG5cclxuXHJcblxyXG53aW5kb3cucmVzdWx0ID0gd2luZG93LmZldGNoKCdodHRwczovL3NwYWNlLWZhc3QtdHJhY2suaGVyb2t1YXBwLmNvbS9nZW5lcmF0ZScpXHJcbiAgICAudGhlbih4ID0+IHgudGV4dCgpKVxyXG4gICAgLnRoZW4oeCA9PiBwYXJzZSh4KSk7Il19