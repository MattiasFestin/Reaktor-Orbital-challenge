var epsilon = 0.01;
//[TODO] - Inline and unrole optimize for 3d case.
var Vec3 = (function () {
    function Vec3(arr) {
        /**
         * Assertions
         */
        if (!Array.isArray(arr)) {
            throw new TypeError('Invalid construtor parameter type. Array expected.');
        }
        if (arr.length !== 3) {
            throw new TypeError('Invalid construtor array length. Length 3 expected.');
        }
        this.value = new Float32Array(arr);
    }
    /**
     * Getters for 3d coordinates
     */
    Vec3.prototype.getX = function () {
        return this.value[0];
    };
    ;
    Vec3.prototype.getY = function () {
        return this.value[1];
    };
    ;
    Vec3.prototype.getZ = function () {
        return this.value[2];
    };
    ;
    Vec3.prototype.add = function (w) {
        var v = this;
        return new Vec3([
            this.getX() + w.getX(),
            this.getY() + w.getY(),
            this.getZ() + w.getZ(),
        ]);
    };
    Vec3.prototype.neg = function () {
        var v = this;
        return new Vec3([
            -this.getX(),
            -this.getY(),
            -this.getZ()
        ]);
    };
    Vec3.prototype.sub = function (w) {
        var v = this;
        return new Vec3([
            v.getX() - w.getX(),
            v.getY() - w.getY(),
            v.getZ() - w.getZ()
        ]);
    };
    Vec3.prototype.scale = function (a) {
        var v = this;
        return new Vec3([
            a * v.getX(),
            a * v.getY(),
            a * v.getZ()
        ]);
    };
    Vec3.prototype.dot = function (w) {
        var v = this;
        return v.getX() * w.getX() + v.getY() * w.getY() + v.getZ() * w.getZ();
    };
    Vec3.prototype.len = function () {
        return Math.sqrt(this.dot(this));
    };
    Vec3.prototype.norm = function () {
        var len = this.len();
        return len === 0 ? this : this.scale(1 / len);
    };
    Vec3.prototype.cross = function (w) {
        var v = this;
        return new Vec3([
            v.getY() * w.getZ() - v.getZ() * w.getY(),
            v.getZ() * w.getX() - v.getX() * w.getZ(),
            v.getX() * w.getY() - v.getY() * w.getX()
        ]);
    };
    Vec3.prototype.distance = function (w) {
        var v = this;
        return Math.sqrt(Math.pow(v.getX() - w.getX(), 2) +
            Math.pow(v.getY() - w.getY(), 2) +
            Math.pow(v.getZ() - w.getZ(), 2));
    };
    Vec3.prototype.toString = function () {
        return this.getX() + "," + this.getY() + "," + this.getZ();
    };
    return Vec3;
})();
var Line = (function () {
    function Line(o, d) {
        this.o = o;
        this.d = d.norm();
    }
    Line.prototype.getPoint = function (distance) {
        return this.o.add(this.d.scale(distance));
    };
    return Line;
})();
var Sphere = (function () {
    function Sphere(o, r) {
        this.o = o;
        this.r = r;
    }
    Sphere.prototype.pointOnSphere = function (p) {
        return Math.abs(p.distance(this.o) - this.r) < epsilon;
    };
    Sphere.prototype.normal = function (p) {
        return new Vec3([
            (p.getX() - this.o.getX()) / this.r,
            (p.getY() - this.o.getY()) / this.r,
            (p.getZ() - this.o.getZ()) / this.r
        ]);
    };
    Sphere.prototype.intersect = function (l) {
        var q = l.d.dot(l.o.sub(this.o)), t = Math.pow(q, 2) - Math.pow(l.o.distance(this.o), 2) + Math.pow(this.r, 2);
        if (t < 0 || (typeof t === 'number' && isNaN(t))) {
            return [];
        }
        else if (t === 0) {
            var x = l.getPoint(-q);
            if (!this.pointOnSphere(x)) {
                throw new Error("Solution points " + x + " not on sphere.");
            }
            return [x]; //One solution (Two points at same postion that tangent the sphere)
        }
        else {
            t = Math.sqrt(t);
            var x0 = l.getPoint(-q - t), x1 = l.getPoint(-q + t);
            if (!this.pointOnSphere(x0)) {
                throw new Error("Solution " + x0 + " point not on sphere.");
            }
            if (!this.pointOnSphere(x1)) {
                throw new Error("Solution " + x1 + " point not on sphere.");
            }
            return [x0, x1]; //Two unique solutions   
        }
    };
    return Sphere;
})();
var PolarCoordinate = (function () {
    function PolarCoordinate(lat, lon, alt) {
        this.lat = lat;
        this.lon = lon;
        this.alt = alt;
    }
    PolarCoordinate.prototype.convert = function () {
        return new Vec3([
            this.alt * Math.cos(this.lat) * Math.cos(this.lon),
            this.alt * Math.cos(this.lat) * Math.sin(this.lon),
            this.alt * Math.sin(this.lat)
        ]);
    };
    return PolarCoordinate;
})();
var RountingPointPairs = (function () {
    function RountingPointPairs(source, target) {
        this.source = source;
        this.target = target;
        this.distance = this.source.position.distance(this.target.position);
    }
    return RountingPointPairs;
})();
var RouteingPoint = (function () {
    function RouteingPoint(name, polarCoord) {
        this.name = name;
        this.position = polarCoord.convert();
    }
    return RouteingPoint;
})();
var Router = (function () {
    function Router(routes) {
        var _this = this;
        this.earth = new Sphere(new Vec3([0, 0, 0]), 6371);
        this.routes = routes;
        // var len = this.routes.length;
        // var i = len;
        // while (i--) {
        //     //The row element
        //     var r = this.routes[i];
        //     r.availiableRoutingPoints = r.availiableRoutingPoints || [];
        //     var j = i;
        //     while (j--) {
        //         //The column element
        //         var c = this.routes[j];
        //         c.availiableRoutingPoints = c.availiableRoutingPoints || [];
        //         //The distance is symetrical when routing.
        //         var distance = (r !== c && this.earth.intersect(new Line(r.position, c.position)).length === 0 ?
        //             Infinity :
        //             r.position.distance(c.position)
        //         );
        //         //Check if inte
        //         if (distance < Infinity) {
        //             r.availiableRoutingPoints.push(new RountingPointPairs(r, c));
        //             c.availiableRoutingPoints.push(new RountingPointPairs(c, r));
        //         } 
        //     }
        // }       
        this.routes = routes
            .map(function (s) {
            s.availiableRoutingPoints = s.availiableRoutingPoints || [];
            if (['start', 'end'].indexOf(s.name) === -1) {
                s.availiableRoutingPoints = s.availiableRoutingPoints.concat(routes
                    .filter(function (q) {
                    return q !== s &&
                        ['start', 'end'].indexOf(q.name) === -1 &&
                        _this.earth.intersect(new Line(s.position, q.position)).length === 0; //Is not self and does not intersect earth 
                })
                    .map(function (x) { return new RountingPointPairs(s, x); })
                    .filter(function (x) { return s.availiableRoutingPoints.indexOf(x) === -1; })
                    .sort(function (a, b) { return a.distance - b.distance; }));
            }
            else {
                //Start and end points will intersect below (behind?) the point
                // We must check the surface normal the direction if it is infront of the point
                var surfaceNormal = _this.earth.normal(s.position);
                s.availiableRoutingPoints = s.availiableRoutingPoints.concat(routes
                    .filter(function (q) {
                    var dot = q.position.sub(s.position).norm().dot(surfaceNormal);
                    debugger;
                    return q !== s &&
                        dot > 0;
                })
                    .map(function (x) { return new RountingPointPairs(s, x); })
                    .filter(function (x) { return s.availiableRoutingPoints.indexOf(x) === -1; })
                    .sort(function (a, b) { return a.distance - b.distance; }));
                //We want symetric relations
                s.availiableRoutingPoints.forEach(function (q) {
                    q.target.availiableRoutingPoints = q.target.availiableRoutingPoints || [];
                    if (q.target.availiableRoutingPoints.every(function (r) { return r.target !== q.source; })) {
                        q.target.availiableRoutingPoints.push(new RountingPointPairs(q.target, q.source));
                    }
                });
            }
            //  else {
            //     var surfaceNormal = this.earth.normal(s.position);
            //     s.availiableRoutingPoints = s.availiableRoutingPoints.concat(
            //         routes
            //         .filter(q => {
            //             var dot = s.position.sub(q.position).norm().dot(surfaceNormal);
            //             debugger;
            //             return q !== s && 
            //                 dot > 0 
            //         })
            //         .map(x => new RountingPointPairs(s, x))
            //         //Remove duplicates
            //         .filter(x => s.availiableRoutingPoints.indexOf(x) === -1)
            //         //Order by distance
            //         .sort((a, b) => a.distance - b.distance)
            //     );
            //     //We want symetric relations
            //     s.availiableRoutingPoints.forEach(q => {
            //         q.target.availiableRoutingPoints = q.target.availiableRoutingPoints || [];
            //         if (q.target.availiableRoutingPoints.every(r => r.target !== q.source)) {
            //             q.target.availiableRoutingPoints.push(new RountingPointPairs(q.target, q.source));
            //         }
            //     });
            // }
            return s;
        });
    }
    Router.prototype.route = function (start, end) {
        var len = this.routes.length;
        var path = [];
        var pathPos = [];
        var distance = 0;
        var distanceArr = [];
        //Floyd–Warshall_algorithm
        //Preset all distances to infinity
        var i = len;
        while (i--) {
            distanceArr[i] = Infinity;
        }
        i = len;
        while (i--) {
            var u = this.routes[i];
            // if (u == end) {
            //     break;
            // }
            console.group(u.name);
            for (var _i = 0, _a = u.availiableRoutingPoints; _i < _a.length; _i++) {
                var neighbor = _a[_i];
                var neighborIndex = this.routes.indexOf(neighbor.target);
                var alt = distanceArr[i] + neighbor.distance;
                console.log(neighbor);
                if (alt < distanceArr[neighborIndex]) {
                    distance += alt;
                    distanceArr[neighborIndex] = alt;
                    path.push(u.name);
                    pathPos.push(u.position);
                }
            }
            console.groupEnd();
        }
        var answer = {
            path: path,
            pathPos: pathPos,
            distance: distance
        };
        console.log('answer:', answer);
        return answer;
        // //Check if some satelite has both start and end
        // var onlyOneSatelite = start.availiableRoutingPoints.filter(x => {
        //     return x.target.availiableRoutingPoints.some(y => y.target === end);
        // }).sort((a, b) => a.distance - b.distance);
        // if (onlyOneSatelite.length > 0) {
        //     console.log('only one satelite needed');
        //     return {
        //         path: [start.name, onlyOneSatelite[0].target.name, end.name],
        //         pathPos: [start.position, onlyOneSatelite[0].target.position, end.position],
        //         distance: onlyOneSatelite[0].distance
        //     };
        // }
        // var recursiveDecent = (node: RouteingPoint, finish: RouteingPoint, answer: IAnswer, visited: RountingPointPairs[]  = []): IAnswer => {
        //     var availiableRoutingPoints = node.availiableRoutingPoints.filter(x => visited.indexOf(x) === -1);
        //     if (availiableRoutingPoints.length === 0 || visited.length > 6) {
        //         return {
        //             distance: Infinity,
        //             path: ['NO_SOLUTION'],
        //             pathPos: []
        //         };
        //     } else if (availiableRoutingPoints.map(x => x.target).indexOf(finish) > -1) {
        //         //[We are done]
        //         return {
        //             distance: answer.distance,
        //             path: answer.path.concat([node.name, finish.name]),
        //             pathPos: answer.pathPos.concat([node.position, finish.position])
        //         };
        //     } else {
        //         var paths = availiableRoutingPoints
        //             //Prevent backtracking
        //             .filter(n => answer.path.indexOf(n.source.name) === -1)
        //             //Recursive decent down child nodes
        //             .map(n => recursiveDecent(
        //                     n.target,
        //                     finish,
        //                     {
        //                         distance: answer.distance + n.distance,
        //                         path: answer.path.concat([n.source.name]),
        //                         pathPos: answer.pathPos.concat([n.source.position])
        //                     },
        //                     visited.concat([n])
        //                 )
        //             )
        //             //We only want solutions
        //             .filter(n => n && n.distance !== Infinity);
        //         var best = paths.sort((a, b) => a.distance - b.distance)[0];
        //         return best;
        //     }
        // };
        // //Walk the tree
        // return recursiveDecent(start, end, {
        //     path: [],
        //     pathPos: [],
        //     distance: 0
        // });
    };
    Router.prototype.minimum = function (arr) {
        var minIndex = 0, minValue = arr[0];
        arr.forEach(function (x, i) {
            if (arr[i] < minValue) {
                minIndex = i;
                minValue = arr[i];
            }
        });
        return {
            index: minIndex,
            value: minValue
        };
    };
    return Router;
})();
//Helper function to parse data
var parse = function parseFn(text) {
    var result;
    var rows = text
        .split(/[\r\n]+/);
    var routeingPoints = rows
        .filter(function (x, i) { return i > 0 && i < rows.length - 1; })
        .map(function (row) {
        var values = row.split(',');
        return new RouteingPoint(values[0], new PolarCoordinate(+values[1], +values[2], +values[3] + 6371));
    });
    var earthPoints = rows[rows.length - 1].split(',');
    //[NOTE] - Add one to earth radious for altidude, to prevent to tangent intersection with sphere
    var start = new RouteingPoint('start', new PolarCoordinate(+earthPoints[1], +earthPoints[2], 6371 + epsilon));
    var end = new RouteingPoint('end', new PolarCoordinate(+earthPoints[3], +earthPoints[4], 6371 + epsilon));
    //Add start and end to routeingPoints
    routeingPoints.unshift(start);
    routeingPoints.push(end);
    var router = new Router(routeingPoints);
    var answer = router.route(start, end);
    var retVal = {
        seed: rows[0],
        routeingPoints: routeingPoints.map(function (x) {
            return {
                name: x.name,
                position: x.position,
                availiableRoutingPoints: x.availiableRoutingPoints.map(function (y) {
                    return {
                        name: y.target.name,
                        position: y.target.position
                    };
                })
            };
        }),
        start: {
            name: start.name,
            position: start.position
        },
        end: {
            name: end.name,
            position: end.position
        },
        answer: answer
    };
    console.log('result:', retVal);
    return retVal;
};
// window.result = parse(`#SEED: 0.15050181397236884
// SAT0,27.366718183277968,-98.8780108301933,315.48216869233056
// SAT1,-45.87656992123351,174.70036036583411,624.231229228254
// SAT2,38.476172673602036,-175.53921274031035,414.9954105226449
// SAT3,-70.32564329652426,25.643034339950418,673.2623317910093
// SAT4,-63.016904731666905,96.43855560058114,468.6637283053949
// SAT5,49.824518992706174,134.0880963884111,612.8659135879406
// SAT6,-61.916440909274286,-68.61415658543805,666.3057834872683
// SAT7,-4.397508556316723,-37.11875780902159,669.7516590780235
// SAT8,-61.94563603217459,63.02138227235477,633.0125284176954
// SAT9,61.25966645988686,-107.51945355529342,360.5823366407088
// SAT10,-26.442157265872638,114.09789986350972,410.65581980961326
// SAT11,48.432802109428565,109.32468552495783,504.48406444813037
// SAT12,59.998087218078666,155.49786973131057,600.7041906836546
// SAT13,-40.258544068249655,130.5566416706402,619.8258434820461
// SAT14,-53.42782551682608,162.75886267836603,683.2628594962157
// SAT15,-20.656913317066056,-79.07525471532652,583.6645808336905
// SAT16,-10.652012014526335,-120.72043914330499,628.6041112028761
// SAT17,13.408178254422808,-101.02954826418674,507.95320836895155
// SAT18,-49.396139631934226,68.19486116066574,494.9908868776713
// SAT19,85.45465890170158,0.8728516688020704,678.6543760248421
// ROUTE,-37.88624966373936,-165.72598804053638,66.28661538569315,73.4048850932341`);
window.result = window.fetch('https://space-fast-track.herokuapp.com/generate')
    .then(function (x) { return x.text(); })
    .then(function (x) { return parse(x); });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsiVmVjMyIsIlZlYzMuY29uc3RydWN0b3IiLCJWZWMzLmdldFgiLCJWZWMzLmdldFkiLCJWZWMzLmdldFoiLCJWZWMzLmFkZCIsIlZlYzMubmVnIiwiVmVjMy5zdWIiLCJWZWMzLnNjYWxlIiwiVmVjMy5kb3QiLCJWZWMzLmxlbiIsIlZlYzMubm9ybSIsIlZlYzMuY3Jvc3MiLCJWZWMzLmRpc3RhbmNlIiwiVmVjMy50b1N0cmluZyIsIkxpbmUiLCJMaW5lLmNvbnN0cnVjdG9yIiwiTGluZS5nZXRQb2ludCIsIlNwaGVyZSIsIlNwaGVyZS5jb25zdHJ1Y3RvciIsIlNwaGVyZS5wb2ludE9uU3BoZXJlIiwiU3BoZXJlLm5vcm1hbCIsIlNwaGVyZS5pbnRlcnNlY3QiLCJQb2xhckNvb3JkaW5hdGUiLCJQb2xhckNvb3JkaW5hdGUuY29uc3RydWN0b3IiLCJQb2xhckNvb3JkaW5hdGUuY29udmVydCIsIlJvdW50aW5nUG9pbnRQYWlycyIsIlJvdW50aW5nUG9pbnRQYWlycy5jb25zdHJ1Y3RvciIsIlJvdXRlaW5nUG9pbnQiLCJSb3V0ZWluZ1BvaW50LmNvbnN0cnVjdG9yIiwiUm91dGVyIiwiUm91dGVyLmNvbnN0cnVjdG9yIiwiUm91dGVyLnJvdXRlIiwiUm91dGVyLm1pbmltdW0iLCJwYXJzZUZuIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFHbkIsQUFEQSxrREFBa0Q7O0lBSTlDQSxjQUFZQSxHQUFhQTtRQUlyQkMsQUFIQUE7O1dBRUdBO1FBQ0hBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RCQSxNQUFNQSxJQUFJQSxTQUFTQSxDQUFDQSxvREFBb0RBLENBQUNBLENBQUNBO1FBQzlFQSxDQUFDQTtRQUVEQSxFQUFFQSxD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QSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQTtJQUMzRUEsQ0FBQ0E7SUFFTVQsa0JBQUdBLEdBQVZBO1FBQ0lVLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO0lBQ3JDQSxDQUFDQTtJQUVNVixtQkFBSUEsR0FBWEE7UUFDSVcsSUFBSUEsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsR0FBR0EsRUFBRUEsQ0FBQ0E7UUFDckJBLE1BQU1BLENBQUNBLEdBQUdBLEtBQUtBLENBQUNBLEdBQUdBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO0lBQ2xEQSxDQUFDQTtJQUVNWCxvQkFBS0EsR0FBWkEsVUFBY0EsQ0FBT0E7UUFDakJZLElBQUlBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBO1FBQ2JBLE1BQU1BLENBQUNBLElBQUlBLElBQUlBLENBQUNBO1lBQ1pBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBO1lBQ3pDQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQSxJQUFJQSxFQUFFQTtZQUN6Q0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUE7U0FDNUNBLENBQUNBLENBQUNBO0lBQ1BB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QUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQzVCQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVqRkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsS0FBS0EsUUFBUUEsSUFBSUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDL0NBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1FBQ2RBLENBQUNBO1FBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ2pCQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUV2QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3pCQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxxQkFBbUJBLENBQUNBLG9CQUFpQkEsQ0FBQ0EsQ0FBQ0E7WUFDM0RBLENBQUNBO1lBRURBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLG1FQUFtRUE7WUFBcEVBLEpBQ2ZBLENBQUNBO1FBQUNBLElBQUlBLENBQUNBLENBQUNBO1lBQ0pB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QUFSLENBQVEsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGVwc2lsb24gPSAwLjAxO1xyXG5cclxuLy9bVE9ET10gLSBJbmxpbmUgYW5kIHVucm9sZSBvcHRpbWl6ZSBmb3IgM2QgY2FzZS5cclxuY2xhc3MgVmVjMyB7XHJcbiAgICBwcml2YXRlIHZhbHVlOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGFycjogbnVtYmVyW10pIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBc3NlcnRpb25zXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjb25zdHJ1dG9yIHBhcmFtZXRlciB0eXBlLiBBcnJheSBleHBlY3RlZC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSAzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY29uc3RydXRvciBhcnJheSBsZW5ndGguIExlbmd0aCAzIGV4cGVjdGVkLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShhcnIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldHRlcnMgZm9yIDNkIGNvb3JkaW5hdGVzXHJcbiAgICAgKi8gICAgXHJcbiAgICBwdWJsaWMgZ2V0WCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF07XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRZICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVsxXTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldFogKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzJdO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcHVibGljIGFkZCAodzogVmVjMykge1xyXG4gICAgICAgIHZhciB2ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzMoW1xyXG4gICAgICAgICAgICB0aGlzLmdldFgoKSArIHcuZ2V0WCgpLFxyXG4gICAgICAgICAgICB0aGlzLmdldFkoKSArIHcuZ2V0WSgpLFxyXG4gICAgICAgICAgICB0aGlzLmdldFooKSArIHcuZ2V0WigpLFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgbmVnICgpIHtcclxuICAgICAgICB2YXIgdiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKFsgXHJcbiAgICAgICAgICAgIC10aGlzLmdldFgoKSxcclxuICAgICAgICAgICAgLXRoaXMuZ2V0WSgpLFxyXG4gICAgICAgICAgICAtdGhpcy5nZXRaKClcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHN1YiAodzogVmVjMykge1xyXG4gICAgICAgIHZhciB2ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzMoW1xyXG4gICAgICAgICAgICB2LmdldFgoKSAtIHcuZ2V0WCgpLFxyXG4gICAgICAgICAgICB2LmdldFkoKSAtIHcuZ2V0WSgpLFxyXG4gICAgICAgICAgICB2LmdldFooKSAtIHcuZ2V0WigpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBzY2FsZSAoYTogbnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIHYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgICAgIGEgKiB2LmdldFgoKSxcclxuICAgICAgICAgICAgYSAqIHYuZ2V0WSgpLFxyXG4gICAgICAgICAgICBhICogdi5nZXRaKClcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGRvdCAodzogVmVjMykge1xyXG4gICAgICAgIHZhciB2ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdi5nZXRYKCkgKiB3LmdldFgoKSArIHYuZ2V0WSgpICogdy5nZXRZKCkgKyB2LmdldFooKSAqIHcuZ2V0WigpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgbGVuKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kb3QodGhpcykpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgbm9ybSAoKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuKCk7XHJcbiAgICAgICAgcmV0dXJuIGxlbiA9PT0gMCA/IHRoaXMgOiB0aGlzLnNjYWxlKDEgLyBsZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcm9zcyAodzogVmVjMykge1xyXG4gICAgICAgIHZhciB2ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzMoW1xyXG4gICAgICAgICAgICB2LmdldFkoKSAqIHcuZ2V0WigpIC0gdi5nZXRaKCkgKiB3LmdldFkoKSxcclxuICAgICAgICAgICAgdi5nZXRaKCkgKiB3LmdldFgoKSAtIHYuZ2V0WCgpICogdy5nZXRaKCksXHJcbiAgICAgICAgICAgIHYuZ2V0WCgpICogdy5nZXRZKCkgLSB2LmdldFkoKSAqIHcuZ2V0WCgpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBkaXN0YW5jZSh3OiBWZWMzKSB7XHJcbiAgICAgICAgdmFyIHYgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoXHJcbiAgICAgICAgICAgIE1hdGgucG93KHYuZ2V0WCgpIC0gdy5nZXRYKCksIDIpICtcclxuICAgICAgICAgICAgTWF0aC5wb3codi5nZXRZKCkgLSB3LmdldFkoKSwgMikgK1xyXG4gICAgICAgICAgICBNYXRoLnBvdyh2LmdldFooKSAtIHcuZ2V0WigpLCAyKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRYKCl9LCR7dGhpcy5nZXRZKCl9LCR7dGhpcy5nZXRaKCl9YDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTGluZSB7XHJcbiAgICBwdWJsaWMgbzogVmVjMztcclxuICAgIHB1YmxpYyBkOiBWZWMzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG86IFZlYzMsIGQ6IFZlYzMpIHtcclxuICAgICAgICB0aGlzLm8gPSBvO1xyXG4gICAgICAgIHRoaXMuZCA9IGQubm9ybSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgZ2V0UG9pbnQgKGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vLmFkZCh0aGlzLmQuc2NhbGUoZGlzdGFuY2UpKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU3BoZXJlIHtcclxuICAgIHB1YmxpYyBvOiBWZWMzO1xyXG4gICAgcHVibGljIHI6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvOiBWZWMzLCByOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLm8gPSBvO1xyXG4gICAgICAgIHRoaXMuciA9IHI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBwb2ludE9uU3BoZXJlIChwOiBWZWMzKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKHAuZGlzdGFuY2UodGhpcy5vKSAtIHRoaXMucikgPCBlcHNpbG9uO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgbm9ybWFsIChwOiBWZWMzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKFtcclxuICAgICAgICAgICAgKHAuZ2V0WCgpIC0gdGhpcy5vLmdldFgoKSkgLyB0aGlzLnIsXHJcbiAgICAgICAgICAgIChwLmdldFkoKSAtIHRoaXMuby5nZXRZKCkpIC8gdGhpcy5yLFxyXG4gICAgICAgICAgICAocC5nZXRaKCkgLSB0aGlzLm8uZ2V0WigpKSAvIHRoaXMuclxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgaW50ZXJzZWN0IChsOiBMaW5lKSB7XHJcbiAgICAgICAgdmFyIHEgPSBsLmQuZG90KGwuby5zdWIodGhpcy5vKSksXHJcbiAgICAgICAgICAgIHQgPSBNYXRoLnBvdyhxLCAyKSAtIE1hdGgucG93KGwuby5kaXN0YW5jZSh0aGlzLm8pLCAyKSArIE1hdGgucG93KHRoaXMuciwgMik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGlmICh0IDwgMCB8fCAodHlwZW9mIHQgPT09ICdudW1iZXInICYmIGlzTmFOKHQpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfSBlbHNlIGlmICh0ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gbC5nZXRQb2ludCgtcSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucG9pbnRPblNwaGVyZSh4KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb2x1dGlvbiBwb2ludHMgJHt4fSBub3Qgb24gc3BoZXJlLmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gW3hdOyAvL09uZSBzb2x1dGlvbiAoVHdvIHBvaW50cyBhdCBzYW1lIHBvc3Rpb24gdGhhdCB0YW5nZW50IHRoZSBzcGhlcmUpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdCA9IE1hdGguc3FydCh0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciB4MCA9IGwuZ2V0UG9pbnQoLXEgLSB0KSxcclxuICAgICAgICAgICAgICAgIHgxID0gbC5nZXRQb2ludCgtcSArIHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBvaW50T25TcGhlcmUoeDApKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvbHV0aW9uICR7eDB9IHBvaW50IG5vdCBvbiBzcGhlcmUuYCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wb2ludE9uU3BoZXJlKHgxKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb2x1dGlvbiAke3gxfSBwb2ludCBub3Qgb24gc3BoZXJlLmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gW3gwLCB4MV07IC8vVHdvIHVuaXF1ZSBzb2x1dGlvbnMgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBvbGFyQ29vcmRpbmF0ZSB7XHJcbiAgICBwdWJsaWMgbGF0OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbG9uOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYWx0OiBudW1iZXI7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yIChsYXQ6IG51bWJlciwgbG9uOiBudW1iZXIsIGFsdDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5sYXQgPSBsYXQ7XHJcbiAgICAgICAgdGhpcy5sb24gPSBsb247XHJcbiAgICAgICAgdGhpcy5hbHQgPSBhbHQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBjb252ZXJ0KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMyhbXHJcbiAgICAgICAgICAgIHRoaXMuYWx0ICogTWF0aC5jb3ModGhpcy5sYXQpICogTWF0aC5jb3ModGhpcy5sb24pLFxyXG4gICAgICAgICAgICB0aGlzLmFsdCAqIE1hdGguY29zKHRoaXMubGF0KSAqIE1hdGguc2luKHRoaXMubG9uKSxcclxuICAgICAgICAgICAgdGhpcy5hbHQgKiBNYXRoLnNpbih0aGlzLmxhdClcclxuICAgICAgICBdKTtcclxuICAgIH1cclxufSBcclxuXHJcbmNsYXNzIFJvdW50aW5nUG9pbnRQYWlycyB7XHJcbiAgICBwdWJsaWMgc291cmNlOiBSb3V0ZWluZ1BvaW50O1xyXG4gICAgcHVibGljIHRhcmdldDogUm91dGVpbmdQb2ludDtcclxuICAgIHB1YmxpYyBkaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvciAoc291cmNlOiBSb3V0ZWluZ1BvaW50LCB0YXJnZXQ6IFJvdXRlaW5nUG9pbnQpIHtcclxuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gdGhpcy5zb3VyY2UucG9zaXRpb24uZGlzdGFuY2UodGhpcy50YXJnZXQucG9zaXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBSb3V0ZWluZ1BvaW50IHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcG9zaXRpb246IFZlYzM7XHJcbiAgICBcclxuICAgIC8vU2F0ZWxpdGVzIGluIHZpZXcgZnJvbSB0aGlzIG9uZVxyXG4gICAgcHVibGljIGF2YWlsaWFibGVSb3V0aW5nUG9pbnRzOiBSb3VudGluZ1BvaW50UGFpcnNbXTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBwb2xhckNvb3JkOiBQb2xhckNvb3JkaW5hdGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb2xhckNvb3JkLmNvbnZlcnQoKTtcclxuICAgIH1cclxufVxyXG5pbnRlcmZhY2UgSUFuc3dlciB7XHJcbiAgICBkaXN0YW5jZTogbnVtYmVyLFxyXG4gICAgcGF0aDogc3RyaW5nW10sXHJcbiAgICBwYXRoUG9zOiBWZWMzW11cclxufVxyXG5jbGFzcyBSb3V0ZXIge1xyXG4gICAgcHVibGljIHJvdXRlczogUm91dGVpbmdQb2ludFtdO1xyXG4gICAgcHVibGljIGVhcnRoOiBTcGhlcmU7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yIChyb3V0ZXM6IFJvdXRlaW5nUG9pbnRbXSkge1xyXG4gICAgICAgIHRoaXMuZWFydGggPSBuZXcgU3BoZXJlKG5ldyBWZWMzKFswLCAwLCAwXSksIDYzNzEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucm91dGVzID0gcm91dGVzO1xyXG4gICAgICAgIC8vIHZhciBsZW4gPSB0aGlzLnJvdXRlcy5sZW5ndGg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gdmFyIGkgPSBsZW47XHJcbiAgICAgICAgLy8gd2hpbGUgKGktLSkge1xyXG4gICAgICAgIC8vICAgICAvL1RoZSByb3cgZWxlbWVudFxyXG4gICAgICAgIC8vICAgICB2YXIgciA9IHRoaXMucm91dGVzW2ldO1xyXG4gICAgICAgIC8vICAgICByLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzID0gci5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyB8fCBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIHZhciBqID0gaTtcclxuICAgICAgICAvLyAgICAgd2hpbGUgKGotLSkge1xyXG4gICAgICAgIC8vICAgICAgICAgLy9UaGUgY29sdW1uIGVsZW1lbnRcclxuICAgICAgICAvLyAgICAgICAgIHZhciBjID0gdGhpcy5yb3V0ZXNbal07XHJcbiAgICAgICAgLy8gICAgICAgICBjLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzID0gYy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyB8fCBbXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICAgLy9UaGUgZGlzdGFuY2UgaXMgc3ltZXRyaWNhbCB3aGVuIHJvdXRpbmcuXHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgZGlzdGFuY2UgPSAociAhPT0gYyAmJiB0aGlzLmVhcnRoLmludGVyc2VjdChuZXcgTGluZShyLnBvc2l0aW9uLCBjLnBvc2l0aW9uKSkubGVuZ3RoID09PSAwID9cclxuICAgICAgICAvLyAgICAgICAgICAgICBJbmZpbml0eSA6XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgci5wb3NpdGlvbi5kaXN0YW5jZShjLnBvc2l0aW9uKVxyXG4gICAgICAgIC8vICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICAgLy9DaGVjayBpZiBpbnRlXHJcbiAgICAgICAgLy8gICAgICAgICBpZiAoZGlzdGFuY2UgPCBJbmZpbml0eSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHIuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMucHVzaChuZXcgUm91bnRpbmdQb2ludFBhaXJzKHIsIGMpKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICBjLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLnB1c2gobmV3IFJvdW50aW5nUG9pbnRQYWlycyhjLCByKSk7XHJcbiAgICAgICAgLy8gICAgICAgICB9IFxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSAgICAgICBcclxuICAgICAgICB0aGlzLnJvdXRlcyA9IHJvdXRlc1xyXG4gICAgICAgICAgICAubWFwKHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyA9IHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMgfHwgW107XHJcbiAgICAgICAgICAgICAgICBpZiAoWydzdGFydCcsICdlbmQnXS5pbmRleE9mKHMubmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyA9IHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihxID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxICE9PSBzICYmIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnc3RhcnQnLCAnZW5kJ10uaW5kZXhPZihxLm5hbWUpID09PSAtMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWFydGguaW50ZXJzZWN0KG5ldyBMaW5lKHMucG9zaXRpb24sIHEucG9zaXRpb24pKS5sZW5ndGggPT09IDA7IC8vSXMgbm90IHNlbGYgYW5kIGRvZXMgbm90IGludGVyc2VjdCBlYXJ0aCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh4ID0+IG5ldyBSb3VudGluZ1BvaW50UGFpcnMocywgeCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIGR1cGxpY2F0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuaW5kZXhPZih4KSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vT3JkZXIgYnkgZGlzdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vU3RhcnQgYW5kIGVuZCBwb2ludHMgd2lsbCBpbnRlcnNlY3QgYmVsb3cgKGJlaGluZD8pIHRoZSBwb2ludFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgY2hlY2sgdGhlIHN1cmZhY2Ugbm9ybWFsIHRoZSBkaXJlY3Rpb24gaWYgaXQgaXMgaW5mcm9udCBvZiB0aGUgcG9pbnRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3VyZmFjZU5vcm1hbCA9IHRoaXMuZWFydGgubm9ybWFsKHMucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMgPSBzLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG90ID0gcS5wb3NpdGlvbi5zdWIocy5wb3NpdGlvbikubm9ybSgpLmRvdChzdXJmYWNlTm9ybWFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEgIT09IHMgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90ID4gMCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCh4ID0+IG5ldyBSb3VudGluZ1BvaW50UGFpcnMocywgeCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIGR1cGxpY2F0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+IHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuaW5kZXhPZih4KSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vT3JkZXIgYnkgZGlzdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vV2Ugd2FudCBzeW1ldHJpYyByZWxhdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBzLmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLmZvckVhY2gocSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHEudGFyZ2V0LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzID0gcS50YXJnZXQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLnRhcmdldC5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5ldmVyeShyID0+IHIudGFyZ2V0ICE9PSBxLnNvdXJjZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEudGFyZ2V0LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLnB1c2gobmV3IFJvdW50aW5nUG9pbnRQYWlycyhxLnRhcmdldCwgcS5zb3VyY2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pOyAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHZhciBzdXJmYWNlTm9ybWFsID0gdGhpcy5lYXJ0aC5ub3JtYWwocy5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyA9IHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICByb3V0ZXNcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmZpbHRlcihxID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBkb3QgPSBzLnBvc2l0aW9uLnN1YihxLnBvc2l0aW9uKS5ub3JtKCkuZG90KHN1cmZhY2VOb3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gcSAhPT0gcyAmJiBcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBkb3QgPiAwIFxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAubWFwKHggPT4gbmV3IFJvdW50aW5nUG9pbnRQYWlycyhzLCB4KSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy9SZW1vdmUgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAuZmlsdGVyKHggPT4gcy5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5pbmRleE9mKHgpID09PSAtMSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy9PcmRlciBieSBkaXN0YW5jZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZSAtIGIuZGlzdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy9XZSB3YW50IHN5bWV0cmljIHJlbGF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHMuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuZm9yRWFjaChxID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgcS50YXJnZXQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMgPSBxLnRhcmdldC5hdmFpbGlhYmxlUm91dGluZ1BvaW50cyB8fCBbXTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKHEudGFyZ2V0LmF2YWlsaWFibGVSb3V0aW5nUG9pbnRzLmV2ZXJ5KHIgPT4gci50YXJnZXQgIT09IHEuc291cmNlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcS50YXJnZXQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMucHVzaChuZXcgUm91bnRpbmdQb2ludFBhaXJzKHEudGFyZ2V0LCBxLnNvdXJjZSkpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBzOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyByb3V0ZSAoc3RhcnQ6IFJvdXRlaW5nUG9pbnQsIGVuZDogUm91dGVpbmdQb2ludCk6IElBbnN3ZXIge1xyXG4gICAgICAgIHZhciBsZW4gPSB0aGlzLnJvdXRlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHZhciBwYXRoOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIHZhciBwYXRoUG9zOiBWZWMzW10gPSBbXTtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSAwO1xyXG4gICAgICAgIHZhciBkaXN0YW5jZUFycjogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAvL0Zsb3lk4oCTV2Fyc2hhbGxfYWxnb3JpdGhtXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9QcmVzZXQgYWxsIGRpc3RhbmNlcyB0byBpbmZpbml0eVxyXG4gICAgICAgIHZhciBpID0gbGVuO1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgZGlzdGFuY2VBcnJbaV0gPSBJbmZpbml0eTtcclxuICAgICAgICB9IFxyXG5cclxuICAgICAgICBpID0gbGVuO1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgdmFyIHUgPSB0aGlzLnJvdXRlc1tpXTsgXHJcbiAgICAgICAgICAgIC8vIGlmICh1ID09IGVuZCkge1xyXG4gICAgICAgICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZ3JvdXAodS5uYW1lKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIG5laWdoYm9yIG9mIHUuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvckluZGV4ID0gdGhpcy5yb3V0ZXMuaW5kZXhPZihuZWlnaGJvci50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsdCA9IGRpc3RhbmNlQXJyW2ldICsgbmVpZ2hib3IuZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5laWdoYm9yKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGFsdCA8IGRpc3RhbmNlQXJyW25laWdoYm9ySW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgKz0gYWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlQXJyW25laWdoYm9ySW5kZXhdID0gYWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaCh1Lm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhQb3MucHVzaCh1LnBvc2l0aW9uKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBhbnN3ZXIgPSB7XHJcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgICAgIHBhdGhQb3M6IHBhdGhQb3MsXHJcbiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2Fuc3dlcjonLCBhbnN3ZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBhbnN3ZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLy9DaGVjayBpZiBzb21lIHNhdGVsaXRlIGhhcyBib3RoIHN0YXJ0IGFuZCBlbmRcclxuICAgICAgICAvLyB2YXIgb25seU9uZVNhdGVsaXRlID0gc3RhcnQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuZmlsdGVyKHggPT4ge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4geC50YXJnZXQuYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMuc29tZSh5ID0+IHkudGFyZ2V0ID09PSBlbmQpO1xyXG4gICAgICAgIC8vIH0pLnNvcnQoKGEsIGIpID0+IGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlKTtcclxuICAgICAgICAvLyBpZiAob25seU9uZVNhdGVsaXRlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ29ubHkgb25lIHNhdGVsaXRlIG5lZWRlZCcpO1xyXG4gICAgICAgIC8vICAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vICAgICAgICAgcGF0aDogW3N0YXJ0Lm5hbWUsIG9ubHlPbmVTYXRlbGl0ZVswXS50YXJnZXQubmFtZSwgZW5kLm5hbWVdLFxyXG4gICAgICAgIC8vICAgICAgICAgcGF0aFBvczogW3N0YXJ0LnBvc2l0aW9uLCBvbmx5T25lU2F0ZWxpdGVbMF0udGFyZ2V0LnBvc2l0aW9uLCBlbmQucG9zaXRpb25dLFxyXG4gICAgICAgIC8vICAgICAgICAgZGlzdGFuY2U6IG9ubHlPbmVTYXRlbGl0ZVswXS5kaXN0YW5jZVxyXG4gICAgICAgIC8vICAgICB9O1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAvLyB2YXIgcmVjdXJzaXZlRGVjZW50ID0gKG5vZGU6IFJvdXRlaW5nUG9pbnQsIGZpbmlzaDogUm91dGVpbmdQb2ludCwgYW5zd2VyOiBJQW5zd2VyLCB2aXNpdGVkOiBSb3VudGluZ1BvaW50UGFpcnNbXSAgPSBbXSk6IElBbnN3ZXIgPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgdmFyIGF2YWlsaWFibGVSb3V0aW5nUG9pbnRzID0gbm9kZS5hdmFpbGlhYmxlUm91dGluZ1BvaW50cy5maWx0ZXIoeCA9PiB2aXNpdGVkLmluZGV4T2YoeCkgPT09IC0xKTtcclxuXHJcbiAgICAgICAgLy8gICAgIGlmIChhdmFpbGlhYmxlUm91dGluZ1BvaW50cy5sZW5ndGggPT09IDAgfHwgdmlzaXRlZC5sZW5ndGggPiA2KSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGRpc3RhbmNlOiBJbmZpbml0eSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBwYXRoOiBbJ05PX1NPTFVUSU9OJ10sXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcGF0aFBvczogW11cclxuICAgICAgICAvLyAgICAgICAgIH07XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSBpZiAoYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMubWFwKHggPT4geC50YXJnZXQpLmluZGV4T2YoZmluaXNoKSA+IC0xKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvL1tXZSBhcmUgZG9uZV1cclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgZGlzdGFuY2U6IGFuc3dlci5kaXN0YW5jZSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBwYXRoOiBhbnN3ZXIucGF0aC5jb25jYXQoW25vZGUubmFtZSwgZmluaXNoLm5hbWVdKSxcclxuICAgICAgICAvLyAgICAgICAgICAgICBwYXRoUG9zOiBhbnN3ZXIucGF0aFBvcy5jb25jYXQoW25vZGUucG9zaXRpb24sIGZpbmlzaC5wb3NpdGlvbl0pXHJcbiAgICAgICAgLy8gICAgICAgICB9O1xyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHBhdGhzID0gYXZhaWxpYWJsZVJvdXRpbmdQb2ludHNcclxuICAgICAgICAvLyAgICAgICAgICAgICAvL1ByZXZlbnQgYmFja3RyYWNraW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLmZpbHRlcihuID0+IGFuc3dlci5wYXRoLmluZGV4T2Yobi5zb3VyY2UubmFtZSkgPT09IC0xKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vUmVjdXJzaXZlIGRlY2VudCBkb3duIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLm1hcChuID0+IHJlY3Vyc2l2ZURlY2VudChcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG4udGFyZ2V0LFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgZmluaXNoLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiBhbnN3ZXIuZGlzdGFuY2UgKyBuLmRpc3RhbmNlLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGFuc3dlci5wYXRoLmNvbmNhdChbbi5zb3VyY2UubmFtZV0pLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhQb3M6IGFuc3dlci5wYXRoUG9zLmNvbmNhdChbbi5zb3VyY2UucG9zaXRpb25dKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWQuY29uY2F0KFtuXSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIClcclxuICAgICAgICAvLyAgICAgICAgICAgICAvL1dlIG9ubHkgd2FudCBzb2x1dGlvbnNcclxuICAgICAgICAvLyAgICAgICAgICAgICAuZmlsdGVyKG4gPT4gbiAmJiBuLmRpc3RhbmNlICE9PSBJbmZpbml0eSk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgdmFyIGJlc3QgPSBwYXRocy5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSlbMF07XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gYmVzdDtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gLy9XYWxrIHRoZSB0cmVlXHJcbiAgICAgICAgLy8gcmV0dXJuIHJlY3Vyc2l2ZURlY2VudChzdGFydCwgZW5kLCB7XHJcbiAgICAgICAgLy8gICAgIHBhdGg6IFtdLFxyXG4gICAgICAgIC8vICAgICBwYXRoUG9zOiBbXSxcclxuICAgICAgICAvLyAgICAgZGlzdGFuY2U6IDBcclxuICAgICAgICAvLyB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBtaW5pbXVtIChhcnI6IG51bWJlcltdKSB7XHJcbiAgICAgICAgdmFyIG1pbkluZGV4ID0gMCxcclxuICAgICAgICAgICAgbWluVmFsdWUgPSBhcnJbMF07XHJcblxyXG4gICAgICAgIGFyci5mb3JFYWNoKCh4LCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhcnJbaV0gPCBtaW5WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbWluSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgbWluVmFsdWUgPSBhcnJbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbmRleDogbWluSW5kZXgsXHJcbiAgICAgICAgICAgIHZhbHVlOiBtaW5WYWx1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIGRhdGFcclxudmFyIHBhcnNlID0gZnVuY3Rpb24gcGFyc2VGbiAodGV4dDogc3RyaW5nKSB7XHJcbiAgICB2YXIgcmVzdWx0O1xyXG4gICAgdmFyIHJvd3MgPSB0ZXh0XHJcbiAgICAgICAgLnNwbGl0KC9bXFxyXFxuXSsvKTtcclxuICAgIFxyXG4gICAgdmFyIHJvdXRlaW5nUG9pbnRzID0gcm93c1xyXG4gICAgICAgIC5maWx0ZXIoKHgsIGkpID0+IGkgPiAwICYmIGkgPCByb3dzLmxlbmd0aCAtIDEpXHJcbiAgICAgICAgLm1hcChyb3cgPT4ge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gcm93LnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJvdXRlaW5nUG9pbnQodmFsdWVzWzBdLCBuZXcgUG9sYXJDb29yZGluYXRlKCt2YWx1ZXNbMV0sICt2YWx1ZXNbMl0sICt2YWx1ZXNbM10gKyA2MzcxKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB2YXIgZWFydGhQb2ludHMgPSByb3dzW3Jvd3MubGVuZ3RoLTFdLnNwbGl0KCcsJyk7XHJcbiAgICBcclxuICAgIC8vW05PVEVdIC0gQWRkIG9uZSB0byBlYXJ0aCByYWRpb3VzIGZvciBhbHRpZHVkZSwgdG8gcHJldmVudCB0byB0YW5nZW50IGludGVyc2VjdGlvbiB3aXRoIHNwaGVyZVxyXG4gICAgdmFyIHN0YXJ0ID0gbmV3IFJvdXRlaW5nUG9pbnQoJ3N0YXJ0JywgbmV3IFBvbGFyQ29vcmRpbmF0ZSgrZWFydGhQb2ludHNbMV0sICtlYXJ0aFBvaW50c1syXSwgNjM3MSArIGVwc2lsb24pKTtcclxuICAgIHZhciBlbmQgPSBuZXcgUm91dGVpbmdQb2ludCgnZW5kJywgbmV3IFBvbGFyQ29vcmRpbmF0ZSgrZWFydGhQb2ludHNbM10sICtlYXJ0aFBvaW50c1s0XSwgNjM3MSArIGVwc2lsb24pKTtcclxuICAgIFxyXG4gICAgLy9BZGQgc3RhcnQgYW5kIGVuZCB0byByb3V0ZWluZ1BvaW50c1xyXG4gICAgcm91dGVpbmdQb2ludHMudW5zaGlmdChzdGFydCk7XHJcbiAgICByb3V0ZWluZ1BvaW50cy5wdXNoKGVuZCk7XHJcbiAgICBcclxuICAgIHZhciByb3V0ZXIgPSBuZXcgUm91dGVyKHJvdXRlaW5nUG9pbnRzKTtcclxuXHJcbiAgICB2YXIgYW5zd2VyID0gcm91dGVyLnJvdXRlKHN0YXJ0LCBlbmQpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIHZhciByZXRWYWwgPSAge1xyXG4gICAgICAgIHNlZWQ6IHJvd3NbMF0sXHJcbiAgICAgICAgcm91dGVpbmdQb2ludHM6IHJvdXRlaW5nUG9pbnRzLm1hcCh4ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHgubmFtZSxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB4LnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgYXZhaWxpYWJsZVJvdXRpbmdQb2ludHM6IHguYXZhaWxpYWJsZVJvdXRpbmdQb2ludHMubWFwKHkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHkudGFyZ2V0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB5LnRhcmdldC5wb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHN0YXJ0OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0YXJ0Lm5hbWUsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGFydC5wb3NpdGlvblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW5kOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IGVuZC5uYW1lLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogZW5kLnBvc2l0aW9uXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbnN3ZXJcclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdyZXN1bHQ6JywgcmV0VmFsKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJldFZhbDtcclxufTtcclxuXHJcbmludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgcmVzdWx0OiBhbnk7XHJcbiAgICBmZXRjaDogKHVybDogc3RyaW5nKSA9PiBhbnk7XHJcbn1cclxuXHJcbi8vIHdpbmRvdy5yZXN1bHQgPSBwYXJzZShgI1NFRUQ6IDAuMTUwNTAxODEzOTcyMzY4ODRcclxuLy8gU0FUMCwyNy4zNjY3MTgxODMyNzc5NjgsLTk4Ljg3ODAxMDgzMDE5MzMsMzE1LjQ4MjE2ODY5MjMzMDU2XHJcbi8vIFNBVDEsLTQ1Ljg3NjU2OTkyMTIzMzUxLDE3NC43MDAzNjAzNjU4MzQxMSw2MjQuMjMxMjI5MjI4MjU0XHJcbi8vIFNBVDIsMzguNDc2MTcyNjczNjAyMDM2LC0xNzUuNTM5MjEyNzQwMzEwMzUsNDE0Ljk5NTQxMDUyMjY0NDlcclxuLy8gU0FUMywtNzAuMzI1NjQzMjk2NTI0MjYsMjUuNjQzMDM0MzM5OTUwNDE4LDY3My4yNjIzMzE3OTEwMDkzXHJcbi8vIFNBVDQsLTYzLjAxNjkwNDczMTY2NjkwNSw5Ni40Mzg1NTU2MDA1ODExNCw0NjguNjYzNzI4MzA1Mzk0OVxyXG4vLyBTQVQ1LDQ5LjgyNDUxODk5MjcwNjE3NCwxMzQuMDg4MDk2Mzg4NDExMSw2MTIuODY1OTEzNTg3OTQwNlxyXG4vLyBTQVQ2LC02MS45MTY0NDA5MDkyNzQyODYsLTY4LjYxNDE1NjU4NTQzODA1LDY2Ni4zMDU3ODM0ODcyNjgzXHJcbi8vIFNBVDcsLTQuMzk3NTA4NTU2MzE2NzIzLC0zNy4xMTg3NTc4MDkwMjE1OSw2NjkuNzUxNjU5MDc4MDIzNVxyXG4vLyBTQVQ4LC02MS45NDU2MzYwMzIxNzQ1OSw2My4wMjEzODIyNzIzNTQ3Nyw2MzMuMDEyNTI4NDE3Njk1NFxyXG4vLyBTQVQ5LDYxLjI1OTY2NjQ1OTg4Njg2LC0xMDcuNTE5NDUzNTU1MjkzNDIsMzYwLjU4MjMzNjY0MDcwODhcclxuLy8gU0FUMTAsLTI2LjQ0MjE1NzI2NTg3MjYzOCwxMTQuMDk3ODk5ODYzNTA5NzIsNDEwLjY1NTgxOTgwOTYxMzI2XHJcbi8vIFNBVDExLDQ4LjQzMjgwMjEwOTQyODU2NSwxMDkuMzI0Njg1NTI0OTU3ODMsNTA0LjQ4NDA2NDQ0ODEzMDM3XHJcbi8vIFNBVDEyLDU5Ljk5ODA4NzIxODA3ODY2NiwxNTUuNDk3ODY5NzMxMzEwNTcsNjAwLjcwNDE5MDY4MzY1NDZcclxuLy8gU0FUMTMsLTQwLjI1ODU0NDA2ODI0OTY1NSwxMzAuNTU2NjQxNjcwNjQwMiw2MTkuODI1ODQzNDgyMDQ2MVxyXG4vLyBTQVQxNCwtNTMuNDI3ODI1NTE2ODI2MDgsMTYyLjc1ODg2MjY3ODM2NjAzLDY4My4yNjI4NTk0OTYyMTU3XHJcbi8vIFNBVDE1LC0yMC42NTY5MTMzMTcwNjYwNTYsLTc5LjA3NTI1NDcxNTMyNjUyLDU4My42NjQ1ODA4MzM2OTA1XHJcbi8vIFNBVDE2LC0xMC42NTIwMTIwMTQ1MjYzMzUsLTEyMC43MjA0MzkxNDMzMDQ5OSw2MjguNjA0MTExMjAyODc2MVxyXG4vLyBTQVQxNywxMy40MDgxNzgyNTQ0MjI4MDgsLTEwMS4wMjk1NDgyNjQxODY3NCw1MDcuOTUzMjA4MzY4OTUxNTVcclxuLy8gU0FUMTgsLTQ5LjM5NjEzOTYzMTkzNDIyNiw2OC4xOTQ4NjExNjA2NjU3NCw0OTQuOTkwODg2ODc3NjcxM1xyXG4vLyBTQVQxOSw4NS40NTQ2NTg5MDE3MDE1OCwwLjg3Mjg1MTY2ODgwMjA3MDQsNjc4LjY1NDM3NjAyNDg0MjFcclxuLy8gUk9VVEUsLTM3Ljg4NjI0OTY2MzczOTM2LC0xNjUuNzI1OTg4MDQwNTM2MzgsNjYuMjg2NjE1Mzg1NjkzMTUsNzMuNDA0ODg1MDkzMjM0MWApO1xyXG5cclxuXHJcblxyXG53aW5kb3cucmVzdWx0ID0gd2luZG93LmZldGNoKCdodHRwczovL3NwYWNlLWZhc3QtdHJhY2suaGVyb2t1YXBwLmNvbS9nZW5lcmF0ZScpXHJcbiAgICAudGhlbih4ID0+IHgudGV4dCgpKVxyXG4gICAgLnRoZW4oeCA9PiBwYXJzZSh4KSk7Il19